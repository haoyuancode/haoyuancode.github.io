<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Spring Cloud</title>
      <link href="/2021/08/23/SpringCloud/"/>
      <url>/2021/08/23/SpringCloud/</url>
      
        <content type="html"><![CDATA[<h2 id="è®¤è¯†å¾®æœåŠ¡"><a href="#è®¤è¯†å¾®æœåŠ¡" class="headerlink" title="è®¤è¯†å¾®æœåŠ¡"></a>è®¤è¯†å¾®æœåŠ¡</h2><span id="more"></span><p><strong>Spring Cloud åªæ˜¯å¾®æœåŠ¡é‡Œé¢çš„ä¸€ä¸ªæŠ€æœ¯</strong></p><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%8A%80%E6%9C%AF%E6%A0%88.png"></p><p><strong>å¾®æœåŠ¡å°±æ˜¯ä¸€ç§ç»è¿‡è‰¯å¥½æ¶æ„è®¾è®¡çš„åˆ†å¸ƒå¼æ¶æ„æ–¹æ¡ˆï¼Œåˆ†å¸ƒå¼çš„ç‰¹å¾ï¼š</strong></p><ul><li><p>å•ä¸€èŒè´£</p><blockquote><p>ä¸šåŠ¡æ‹†åˆ†ç²’åº¦æ›´å°ï¼Œé¿å…ä¸šåŠ¡é‡å¤å¼€å‘</p></blockquote></li><li><p>é¢å‘æœåŠ¡</p><blockquote><p>å¯¹å¤–æš´éœ²ä¸šåŠ¡æ¥å£ï¼Œç­‰ç€æ¥è°ƒç”¨</p></blockquote></li><li><p>è‡ªæ²»</p><blockquote><p>ä¸€ä¸ªä¸šåŠ¡åˆ’åˆ†æˆå¤šä¸ªå›¢é˜Ÿï¼Œæ¯ä¸ªå›¢é˜Ÿè´Ÿè´£ä¸€ä¸ªå°çš„åŠŸèƒ½æ¨¡å—ï¼Œæ¯ä¸ªå›¢é˜Ÿç‹¬ç«‹ï¼ŒæŠ€æœ¯ç‹¬ç«‹ã€æ•°æ®åº“ä¹Ÿæ˜¯ç‹¬ç«‹ï¼Œéƒ¨ç½²ä¹Ÿç‹¬ç«‹</p></blockquote></li><li><p>éš”ç¦»æ€§å¼º</p><blockquote><p>æœåŠ¡è°ƒç”¨åšå¥½éš”ç¦»ã€é™çº§ç­‰ï¼Œé¿å…å‡ºç°çº§è”é—®é¢˜</p></blockquote></li></ul><p><strong>Spring Cloudå’ŒDubboçš„åŒºåˆ«</strong></p><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/springcloud%E5%92%8Cdubboqubie.jpg"></p><p><strong>Dubboä½¿ç”¨RPCè¿›è¡Œè¿œç¨‹è°ƒç”¨ï¼Œè€ŒSpring Cloudä½¿ç”¨HTTPè¿›è¡Œè°ƒç”¨</strong></p><h2 id="å¦‚ä½•ä½¿ç”¨Spring-Cloud"><a href="#å¦‚ä½•ä½¿ç”¨Spring-Cloud" class="headerlink" title="å¦‚ä½•ä½¿ç”¨Spring Cloud"></a>å¦‚ä½•ä½¿ç”¨Spring Cloud</h2><ol><li><p>å¯¼å…¥spring cloudä¾èµ–</p></li><li><p>å¯¼å…¥spring bootä¾èµ–</p><blockquote><p>spring cloudä¾èµ–äºspring boot</p></blockquote></li></ol><p><strong>çœ‹èµ·æ¥å¯¼å…¥é…ç½®å°±å¯ä½¿ç”¨ï¼Œè¦æ³¨æ„Spring Cloudæ˜¯éœ€è¦é…åˆå…¶ä»–ç»„ä»¶ä¸€èµ·ä½¿ç”¨</strong></p><h2 id="Spring-Cloudé€šè¿‡Httpæ–¹å¼è¿›è¡Œè¿œç¨‹è°ƒç”¨"><a href="#Spring-Cloudé€šè¿‡Httpæ–¹å¼è¿›è¡Œè¿œç¨‹è°ƒç”¨" class="headerlink" title="Spring Cloudé€šè¿‡Httpæ–¹å¼è¿›è¡Œè¿œç¨‹è°ƒç”¨"></a>Spring Cloudé€šè¿‡Httpæ–¹å¼è¿›è¡Œè¿œç¨‹è°ƒç”¨</h2><p><strong>æ¨¡æ‹Ÿåœºæ™¯</strong></p><blockquote><p>æœ‰ä¸€ä¸ªæ ¹æ®ç”¨æˆ·idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„user-serviceæ¨¡å—ï¼Œå’Œæ ¹æ®è®¢å•å·æŸ¥è¯¢è®¢å•çš„order-serviceæ¨¡å—ã€‚<br>ç°åœ¨æ·»åŠ ä¸€ä¸ªåŠŸèƒ½ï¼Œæ ¹æ®è®¢å•å·æŸ¥è¯¢è®¢å•çš„åŒæ—¶ä¹Ÿè¦æŸ¥è¯¢å‡ºç”¨æˆ·çš„ä¿¡æ¯ã€‚ï¼ˆè®¢å•ç±»ä¸­åŒ…å«æœ‰userå±æ€§ï¼‰</p></blockquote><p><strong>å®ç°æ€è·¯</strong>ï¼š</p><ol><li><p>åœ¨order-serviceé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ<strong>RestTemplate</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function">publci RestTemplate <span class="title">restTemplate</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> RestTemplate();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨Serviceä¸­ä½¿ç”¨è‡ªåŠ¨æ³¨å…¥RestTemplateå¯¹è±¡ï¼Œä½¿ç”¨RestTemplate.getâ€¦()æˆ–è€…RestTemplate.postâ€¦()æ¥å®ç°</p><blockquote><p>ä½¿ç”¨RestTemplate.getâ€¦()æˆ–è€…RestTemplate.postâ€¦()æ–¹æ³•ï¼Œè¦ç»™å®šä¸€ä¸ªurlå’Œbeanå¯¹è±¡</p></blockquote></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AutoWire</span></span><br><span class="line"><span class="keyword">private</span> RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Order <span class="title">queryOrderById</span><span class="params">(Long orderId)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1.æŸ¥è¯¢è®¢å•</span></span><br><span class="line">    Order order = orderMapper.findById(orderId);</span><br><span class="line">    <span class="comment">// 2.åˆ©ç”¨RestTemplateå‘èµ·httpè¯·æ±‚ï¼ŒæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">    <span class="comment">// 2.1.urlè·¯å¾„</span></span><br><span class="line">    String url = <span class="string">&quot;http://userservice/user/&quot;</span> + order.getUserId();</span><br><span class="line">    <span class="comment">// 2.2.å‘é€httpè¯·æ±‚ï¼Œå®ç°è¿œç¨‹è°ƒç”¨</span></span><br><span class="line">    User user = restTemplate.getForObject(url, User.class);</span><br><span class="line">    <span class="comment">// 3.å°è£…useråˆ°Order</span></span><br><span class="line">    order.setUser(user);</span><br><span class="line">    <span class="comment">// 4.è¿”å›</span></span><br><span class="line">    <span class="keyword">return</span> order;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Feign"><a href="#Feign" class="headerlink" title="Feign"></a>Feign</h2><p>Feignæ˜¯ä¸€ä¸ªå£°æ˜å¼çš„httpå®¢æˆ·ç«¯ï¼Œè§£å†³ä¸Šè¾¹æåˆ°çš„ä½¿ç”¨RestTemplateå‘é€è¯·æ±‚urlæ—¶ä¸€äº›ä»£ç é—®é¢˜ã€‚æ¯”å¦‚å¯è¯»æ€§å·®ï¼Œå‚æ•°å¤æ‚ç­‰ï¼Œå¸®åŠ©æˆ‘ä»¬ä¼˜é›…çš„å®ç°httpè¯·æ±‚çš„å‘é€ã€‚ç”¨æ¥ä»£æ›¿RestTemplate</p><p>è€Œä¸”<strong>Feigné›†æˆRibbonï¼Œè‡ªåŠ¨å®ç°è´Ÿè½½å‡è¡¡</strong></p><h3 id="å¦‚ä½•ä½¿ç”¨Feign"><a href="#å¦‚ä½•ä½¿ç”¨Feign" class="headerlink" title="å¦‚ä½•ä½¿ç”¨Feign"></a>å¦‚ä½•ä½¿ç”¨Feign</h3><ol><li> åœ¨å®¢æˆ·ç«¯å¼•å…¥ä¾èµ–</li></ol>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--feignå®¢æˆ·ç«¯ä¾èµ–--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><ol start="2"><li><p>å®¢æˆ·ç«¯å¯åŠ¨ç±»æ·»åŠ æ³¨è§£å¼€å¯Feign</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableFeignClients</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(OrderApplication.class, args);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™Feignå®¢æˆ·ç«¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªæ¥å£ï¼Œå®šä¹‰æ–¹æ³•</span></span><br><span class="line"><span class="meta">@FeignClient(value = &quot;userservice&quot;)</span> <span class="comment">//æ‹¬å·å†…æ˜¯è¦è®¿é—®çš„æœåŠ¡å</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserClient</span> </span>&#123;    </span><br><span class="line">    <span class="meta">@GetMapping(&quot;/user/&#123;id&#125;&quot;)</span> <span class="comment">//å‘é€æ–¹å¼è¿˜æ˜¯Getï¼Œå¦‚æœå‚æ•°æœ‰å¤šä¸ªï¼Œç›´æ¥åŠ &#123;&#125;</span></span><br><span class="line">    <span class="function">User <span class="title">findById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span></span>;  <span class="comment">//å‚æ•°å¯¹åº”ä¸Šé¢</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è°ƒç”¨æ—¶</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> OrderMapper orderMapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UserClient userClient;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Order <span class="title">queryOrderById</span><span class="params">(Long orderId)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1.æŸ¥è¯¢è®¢å•</span></span><br><span class="line">    Order order = orderMapper.findById(orderId);</span><br><span class="line">    <span class="comment">// 2.ç”¨Feignè¿œç¨‹è°ƒç”¨</span></span><br><span class="line">    User user = userClient.findById(order.getUserId());</span><br><span class="line">    <span class="comment">// 3.å°è£…useråˆ°Order</span></span><br><span class="line">    order.setUser(user);</span><br><span class="line">    <span class="comment">// 4.è¿”å›</span></span><br><span class="line">    <span class="keyword">return</span> order;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¹æ¯”ä¹‹å‰å†™æ³•</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> OrderMapper orderMapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@AutoWire</span></span><br><span class="line"><span class="keyword">private</span> RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Order <span class="title">queryOrderById</span><span class="params">(Long orderId)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1.æŸ¥è¯¢è®¢å•</span></span><br><span class="line">    Order order = orderMapper.findById(orderId);</span><br><span class="line">    <span class="comment">// 2.åˆ©ç”¨RestTemplateå‘èµ·httpè¯·æ±‚ï¼ŒæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">    <span class="comment">// 2.1.urlè·¯å¾„</span></span><br><span class="line">    String url = <span class="string">&quot;http://userservice/user/&quot;</span> + order.getUserId();</span><br><span class="line">    <span class="comment">// 2.2.å‘é€httpè¯·æ±‚ï¼Œå®ç°è¿œç¨‹è°ƒç”¨</span></span><br><span class="line">    User user = restTemplate.getForObject(url, User.class);</span><br><span class="line">    <span class="comment">// 3.å°è£…useråˆ°Order</span></span><br><span class="line">    order.setUser(user);</span><br><span class="line">    <span class="comment">// 4.è¿”å›</span></span><br><span class="line">    <span class="keyword">return</span> order;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¼˜é›…ä¹ˆï¼Ÿå†™æ³•ç¡®å®æ›´ç®€å•äº†</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="è‡ªå®šä¹‰Feigné…ç½®"><a href="#è‡ªå®šä¹‰Feigné…ç½®" class="headerlink" title="è‡ªå®šä¹‰Feigné…ç½®"></a>è‡ªå®šä¹‰Feigné…ç½®</h3><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/Feign%E8%87%AA%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7.PNG" alt="img"></p><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/Feign%E8%87%AA%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F%E4%B8%80.PNG" alt="img"></p><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/Feign%E8%87%AA%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F%E4%BA%8C.PNG" alt="img"></p><h3 id="Feignæ€§èƒ½ä¼˜åŒ–"><a href="#Feignæ€§èƒ½ä¼˜åŒ–" class="headerlink" title="Feignæ€§èƒ½ä¼˜åŒ–"></a>Feignæ€§èƒ½ä¼˜åŒ–</h3><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/Feign%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.PNG" alt="img"></p><p><strong>å› ä¸ºFeignåº•å±‚ä½¿ç”¨URLConnectionï¼Œæ‰€ä»¥å¯ä»¥æ›¿æ¢æˆApache HttpClientæˆ–è€…OKHttpï¼Œæ¼”ç¤ºä½¿ç”¨Apache HttpClient</strong></p><blockquote><p>æ³¨æ„ï¼š</p><p>æ˜¯åœ¨å®¢æˆ·ç«¯å¼•å…¥ä¾èµ–å’Œé…ç½®è¿™äº›å±æ€§</p></blockquote><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/Feign%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%BD%BF%E7%94%A8HttpClient.PNG" alt="img"></p><p><strong>Feignæ€§èƒ½ä¼˜åŒ–æ€»ç»“:</strong></p><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/Feign%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%80%BB%E7%BB%93.PNG" alt="img"></p><h3 id="å®é™…å¼€å‘ä¸­Feignçš„åº”ç”¨"><a href="#å®é™…å¼€å‘ä¸­Feignçš„åº”ç”¨" class="headerlink" title="å®é™…å¼€å‘ä¸­Feignçš„åº”ç”¨"></a>å®é™…å¼€å‘ä¸­Feignçš„åº”ç”¨</h3><p>ä¸¤ç§æ–¹å¼ï¼š</p><ol><li><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/Feign%E5%AE%9E%E9%99%85%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A81.PNG" alt="img"></li><li><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/Feign%E5%AE%9E%E9%99%85%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A82.PNG" alt="img"></li></ol><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/Feign%E5%AE%9E%E9%99%85%E5%BC%80%E5%8F%91%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95.PNG" alt="img"></p><h2 id="Eureka"><a href="#Eureka" class="headerlink" title="Eureka"></a>Eureka</h2><h3 id="ä»€ä¹ˆæ˜¯Eureka"><a href="#ä»€ä¹ˆæ˜¯Eureka" class="headerlink" title="ä»€ä¹ˆæ˜¯Eureka"></a>ä»€ä¹ˆæ˜¯Eureka</h3><p>Eurekaæ˜¯Spring Cloudçš„æ³¨å†Œä¸­å¿ƒï¼Œå°±åƒDubboçš„Zookeeperã€‚<br>æœåŠ¡æä¾›è€…å’Œæ¶ˆè´¹è€…éƒ½è¢«eurekaç§°ä¸ºclientï¼Œ<strong>æœåŠ¡æä¾›è€…ä¼šæ¯éš”30ç§’ä¼šåƒeurekaå‘é€â€œå¿ƒè·³ç»­çº¦â€ï¼Œè€Œæ¶ˆè´¹è€…ä¹Ÿä¼šæ›´æ–°æœ¬åœ°çš„æœåŠ¡åˆ—è¡¨ç¼“å­˜</strong>ç¡®ä¿æ¶ˆè´¹è€…è¿›è¡Œè¿œç¨‹è°ƒç”¨æ—¶èƒ½å¤Ÿè°ƒç”¨åˆ°æœåŠ¡ã€‚è€Œä¸”æ¶ˆè´¹è€…ä¼šæ ¹æ®è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œä»æœåŠ¡åˆ—è¡¨é‡Œé¢æŒ‘é€‰ã€‚</p><h3 id="å¦‚ä½•åˆ›å»ºEureka"><a href="#å¦‚ä½•åˆ›å»ºEureka" class="headerlink" title="å¦‚ä½•åˆ›å»ºEureka"></a>å¦‚ä½•åˆ›å»ºEureka</h3><ol><li><p>åˆ›å»ºä¸€ä¸ªEurekaæ¨¡å—</p></li><li><p>å¼•å…¥Eurekaä¾èµ–</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></li><li><p>å†™eurekaç±»,ä½¿ç”¨@EnableEurekaServeræ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableEurekaServer</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EurekaApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(EurekaApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®Eureka</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">10086</span> <span class="comment"># æœåŠ¡ç«¯å£</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">eurekaserver</span> <span class="comment"># eurekaçš„æœåŠ¡åç§°</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span>  <span class="comment"># eurekaçš„åœ°å€ä¿¡æ¯</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://127.0.0.1:10086/eureka</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="æœåŠ¡æ³¨å†Œ"><a href="#æœåŠ¡æ³¨å†Œ" class="headerlink" title="æœåŠ¡æ³¨å†Œ"></a>æœåŠ¡æ³¨å†Œ</h3><p>ä¾‹å¦‚ å°†userServiceæ¨¡å—ä¸­å¼•å…¥eurekaï¼Œå¹¶æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒ</p><ol><li><p>å¼•å…¥eurekaä¾èµ–</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--eurekaå®¢æˆ·ç«¯ä¾èµ–--&gt;</span><br><span class="line">        &lt;!--&lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;</span><br><span class="line"> &lt;/dependency&gt;--&gt;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®eurekaåœ°å€</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Spring:</span></span><br><span class="line"> <span class="attr">application:</span></span><br><span class="line"> <span class="attr">name:</span> <span class="string">userService</span>  <span class="comment"># useræœåŠ¡åç§°</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line"> <span class="attr">client:</span></span><br><span class="line">   <span class="attr">service-url:</span>  <span class="comment"># eurekaçš„åœ°å€ä¿¡æ¯</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://127.0.0.1:10086/eureka</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="æœåŠ¡å‘ç°"><a href="#æœåŠ¡å‘ç°" class="headerlink" title="æœåŠ¡å‘ç°"></a>æœåŠ¡å‘ç°</h3><p>ä¾‹å¦‚ å°†orderServiceæ¨¡å—ä¸­å¼•å…¥eureka,è°ƒç”¨userService</p><p>åœ¨<strong>æœåŠ¡æ³¨å†Œ</strong>çš„åŸºç¡€ä¸Šåšä»¥ä¸‹å‡ æ­¥</p><ul><li><p>åœ¨åˆ›å»ºçš„<strong>RestTemplate</strong>ç±»ä¸ŠåŠ å…¥@LoadBalancedæ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@LoadBalanced</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RestTemplate <span class="title">restTemplate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RestTemplate();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>å°†urlä¿®æ”¹ä¸ºæœåŠ¡æ³¨å†Œæ—¶é…ç½®çš„åå­—</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#åœ¨userServiceé…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®çš„Eurekaåå­—æ˜¯ userserviceï¼Œå› æ­¤åœ¨è¿›è¡Œhttpè°ƒç”¨æ—¶ï¼Œä½¿ç”¨è¯¥åå­—å³å¯</span><br><span class="line">    String url = <span class="string">&quot;http://userservice/user/&quot;</span> + order.getUserId();</span><br></pre></td></tr></table></figure></li></ul><h2 id="Ribbonè´Ÿè½½å‡è¡¡"><a href="#Ribbonè´Ÿè½½å‡è¡¡" class="headerlink" title="Ribbonè´Ÿè½½å‡è¡¡"></a>Ribbonè´Ÿè½½å‡è¡¡</h2><h3 id="Ribbonæ˜¯ä»€ä¹ˆ"><a href="#Ribbonæ˜¯ä»€ä¹ˆ" class="headerlink" title="Ribbonæ˜¯ä»€ä¹ˆ"></a>Ribbonæ˜¯ä»€ä¹ˆ</h3><p>Ribbonæ˜¯<strong>Nexflix Ribbon</strong>å®ç°çš„ä¸€å¥—<strong>å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡å·¥å…·</strong></p><h3 id="Ribbonè´Ÿè½½å‡è¡¡åŸç†"><a href="#Ribbonè´Ÿè½½å‡è¡¡åŸç†" class="headerlink" title="Ribbonè´Ÿè½½å‡è¡¡åŸç†"></a>Ribbonè´Ÿè½½å‡è¡¡åŸç†</h3><p>é€šè¿‡æºç å¾—å‡ºä¸‹é¢ç»“è®ºå’Œå›¾ç‰‡ï¼š</p><blockquote><p> å½“å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚åï¼Œè¯·æ±‚å°±ä¼šè¢«Ribbonæ‹¦æˆªï¼Œé¦–å…ˆè·å–è¯·æ±‚ä¸­çš„urlï¼Œç„¶åå»EurekaæŸ¥æ‰¾æœåŠ¡å¹¶è¿”å›æœåŠ¡åˆ—è¡¨ï¼Œç»è¿‡è´Ÿè½½å‡è¡¡åé€‰æ‹©æœåŠ¡åˆ—è¡¨ä¸­çš„æŸä¸ªæœåŠ¡ï¼Œæœ€åä¿®æ”¹urlï¼Œå‘èµ·è¯·æ±‚</p></blockquote><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/Ribbon.PNG"></p><p><em><strong>è´Ÿè½½å‡è¡¡è§„åˆ™éƒ½æ˜¯ç”±IRuleå†³å®š</strong></em></p><h3 id="Ribbonè´Ÿè½½å‡è¡¡ç­–ç•¥"><a href="#Ribbonè´Ÿè½½å‡è¡¡ç­–ç•¥" class="headerlink" title="Ribbonè´Ÿè½½å‡è¡¡ç­–ç•¥"></a>Ribbonè´Ÿè½½å‡è¡¡ç­–ç•¥</h3><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/Ribbon%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%AD%96%E7%95%A5.PNG" alt="img"></p><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%AD%96%E7%95%A5.PNG" alt="img"></p><p>è´Ÿè½½å‡è¡¡<strong>é»˜è®¤ä½¿ç”¨è½®è¯¢è§„åˆ™</strong></p><h3 id="æ”¹å˜è´Ÿè½½å‡è¡¡è§„åˆ™"><a href="#æ”¹å˜è´Ÿè½½å‡è¡¡è§„åˆ™" class="headerlink" title="æ”¹å˜è´Ÿè½½å‡è¡¡è§„åˆ™"></a>æ”¹å˜è´Ÿè½½å‡è¡¡è§„åˆ™</h3><ol><li><p>åœ¨æ¶ˆè´¹è€…çš„applicationç±»ä¸­ï¼Œæˆ–è€…è‡ªå®šä¹‰ä¸€ä¸ªé…ç½®ç±»ï¼Œå®šä¹‰ä¸€ä¸ªæ–°çš„IRule</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> IRule <span class="title">randomRule</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> RandomRule();<span class="comment">//new ä¸€ä¸ªæƒ³ä½¿ç”¨çš„è§„åˆ™å³å¯</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå®šä¹‰çš„æ˜¯å…¨å±€è§„åˆ™</p></blockquote></li><li><p>åœ¨yamlé…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹è§„åˆ™</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">userservice:</span> <span class="comment">#æŒ‡å®šæœåŠ¡</span></span><br><span class="line">  <span class="attr">ribbon:</span></span><br><span class="line">    <span class="attr">NFLoadBalancerRuleClassName:</span> <span class="string">com.alibaba.cloud.nacos.ribbon.RandomRule</span>  <span class="comment"># è´Ÿè½½å‡è¡¡è§„åˆ™</span></span><br></pre></td></tr></table></figure><blockquote><p>æŒ‡å®šå…·ä½“çš„æœåŠ¡ï¼Œè€Œä¸æ˜¯å…¨å±€åº”ç”¨ä¿®æ”¹åçš„è§„åˆ™</p></blockquote></li></ol><h3 id="é¥¥é¥¿åŠ è½½"><a href="#é¥¥é¥¿åŠ è½½" class="headerlink" title="é¥¥é¥¿åŠ è½½"></a>é¥¥é¥¿åŠ è½½</h3><p>Ribboné»˜è®¤é‡‡ç”¨æ‡’åŠ è½½ï¼Œåœ¨ç¬¬ä¸€æ¬¡è®¿é—®æ—¶æ‰ä¼šå»åˆ›å»ºè´Ÿè½½å‡è¡¡å®¢æˆ·ç«¯ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶é—´ä¼šé•¿<br>é¥¥é¥¿åŠ è½½ä¼šåœ¨é¡¹ç›®å¯åŠ¨æ—¶åˆ›å»ºï¼Œé™ä½è®¿é—®æ—¶é—´</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ribbon:</span></span><br><span class="line">  <span class="attr">eager-load:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># å¼€å¯é¥¥é¥¿åŠ è½½</span></span><br><span class="line">    <span class="attr">clients:</span> <span class="comment"># æŒ‡å®šé¥¥é¥¿åŠ è½½çš„æœåŠ¡åç§°</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">userservice</span></span><br></pre></td></tr></table></figure><h2 id="Nacos"><a href="#Nacos" class="headerlink" title="Nacos"></a>Nacos</h2><h3 id="Nacosæ˜¯å•¥"><a href="#Nacosæ˜¯å•¥" class="headerlink" title="Nacosæ˜¯å•¥"></a>Nacosæ˜¯å•¥</h3><p>Nacosæ˜¯é˜¿é‡Œå·´å·´çš„äº§å“ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ³¨å†Œä¸­å¿ƒï¼Œç°åœ¨æ˜¯spring cloudä¸€ä¸ªç»„ä»¶ï¼Œæ¯”Eurekaä¸°å¯Œï¼Œå›½å†…å—æ¬¢è¿</p><h3 id="å¦‚ä½•ä½¿ç”¨"><a href="#å¦‚ä½•ä½¿ç”¨" class="headerlink" title="å¦‚ä½•ä½¿ç”¨"></a>å¦‚ä½•ä½¿ç”¨</h3><ol><li><p>ä¸‹è½½<a href="https://nacos.io/zh-cn/">Nacos</a></p></li><li><p>åœ¨çˆ¶å·¥ç¨‹å¯¼å…¥ä¾èµ–</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--nacosçš„ç®¡ç†ä¾èµ–--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.2.5.RELEASE&lt;/version&gt;</span><br><span class="line">    &lt;type&gt;pom&lt;/type&gt;</span><br><span class="line">    &lt;scope&gt;import&lt;/scope&gt;</span><br><span class="line"> &lt;/dependency&gt;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨æä¾›è€…å’Œæ¶ˆè´¹è€…ä¸­å¼•å…¥å®¢æˆ·ç«¯ä¾èµ–</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- nacoså®¢æˆ·ç«¯ä¾èµ–åŒ… --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></li><li><p>æ¶ˆè´¹è€…å’Œæä¾›è€…è®¾ç½®Nacosåœ°å€</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cloud:</span></span><br><span class="line">  <span class="attr">nacos:</span></span><br><span class="line">    <span class="attr">server-addr:</span> <span class="string">nacos:8848</span> <span class="comment"># nacosæœåŠ¡åœ°å€</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="é›†ç¾¤éƒ¨ç½²"><a href="#é›†ç¾¤éƒ¨ç½²" class="headerlink" title="é›†ç¾¤éƒ¨ç½²"></a>é›†ç¾¤éƒ¨ç½²</h3><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/Nacos%E9%9B%86%E7%BE%A4%E6%A8%A1%E5%9E%8B.PNG" alt="img"></p><h4 id="å¦‚ä½•è®¾ç½®é›†ç¾¤"><a href="#å¦‚ä½•è®¾ç½®é›†ç¾¤" class="headerlink" title="å¦‚ä½•è®¾ç½®é›†ç¾¤"></a>å¦‚ä½•è®¾ç½®é›†ç¾¤</h4><p>ä½¿ç”¨spring.cloud.nacos.discoverycluster-nameå±æ€§è®¾ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cloud:</span></span><br><span class="line">  <span class="attr">nacos:</span></span><br><span class="line">    <span class="attr">server-addr:</span> <span class="string">nacos:8848</span> <span class="comment"># nacosæœåŠ¡åœ°å€</span></span><br><span class="line">    <span class="attr">discovery:</span></span><br><span class="line">      <span class="attr">cluster-name:</span> <span class="string">shanghai</span> <span class="comment">#é›†ç¾¤åç§°</span></span><br></pre></td></tr></table></figure><h3 id="ä¼˜å…ˆè°ƒç”¨æœ¬åœ°é›†ç¾¤"><a href="#ä¼˜å…ˆè°ƒç”¨æœ¬åœ°é›†ç¾¤" class="headerlink" title="ä¼˜å…ˆè°ƒç”¨æœ¬åœ°é›†ç¾¤"></a>ä¼˜å…ˆè°ƒç”¨æœ¬åœ°é›†ç¾¤</h3><p>æœåŠ¡è€…è°ƒç”¨è€…å’ŒæœåŠ¡æä¾›è€…é›†ç¾¤çš„åç§°è®¾ç½®ä¸ºç›¸åŒï¼Œç„¶åè®¾ç½®è°ƒç”¨è€…çš„è´Ÿè½½å‡è¡¡è§„åˆ™ä¸ºNacosRuleã€‚<br>å¦‚æœæœ¬åœ°é›†ç¾¤æ²¡æœ‰å®ä¾‹ï¼Œåˆ™ä¼šè·¨é›†ç¾¤è°ƒç”¨</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">userservice:</span></span><br><span class="line">  <span class="attr">ribbon:</span></span><br><span class="line">    <span class="attr">NFLoadBalancerRuleClassName:</span> <span class="string">com.alibaba.cloud.nacos.ribbon.NacosRule</span>  <span class="comment"># è´Ÿè½½å‡è¡¡è§„åˆ™</span></span><br></pre></td></tr></table></figure><h3 id="è°ƒèŠ‚æœåŠ¡å®ä¾‹æƒé‡"><a href="#è°ƒèŠ‚æœåŠ¡å®ä¾‹æƒé‡" class="headerlink" title="è°ƒèŠ‚æœåŠ¡å®ä¾‹æƒé‡"></a>è°ƒèŠ‚æœåŠ¡å®ä¾‹æƒé‡</h3><p>æƒé‡å€¼ä¸€èˆ¬æ˜¯0-1ä¹‹é—´ï¼Œå€¼è¶Šå°ï¼Œè¢«è®¿é—®åˆ°çš„å¯èƒ½æ€§è¶Šå°ï¼Œåä¹‹äº¦ç„¶ã€‚</p><blockquote><p>å¦‚æœå®ä¾‹è¦å‡çº§ï¼Œå¯ä»¥å°†æŸä¸€å®ä¾‹è°ƒä¸º0ä¸å…è®¸è®¿é—®ï¼Œè¿›è¡Œå‡çº§åï¼Œè°ƒèŠ‚æˆä¸€ä¸ªå…è®¸è®¿é—®çš„å€¼ï¼Œæ”¾è¿›æ¥ä¸€éƒ¨åˆ†ç”¨æˆ·è¿›è¡Œæµ‹è¯•ï¼Œå¦‚æœæµ‹è¯•æˆåŠŸï¼Œå°†æƒé‡ä¸ºè°ƒèŠ‚ä¸ºæ­£å¸¸å€¼ï¼Œå…¶ä»–å®ä¾‹ä¾æ¬¡è¿™æ ·å‡çº§ã€‚</p></blockquote><p>å®ä¾‹è°ƒèŠ‚æ–¹æ³•æ˜¯åœ¨nacosç•Œé¢æ§åˆ¶å°è¿›è¡Œè®¿é—®</p><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/nacos%E6%9D%83%E9%87%8D%E8%B0%83%E8%8A%82.PNG" alt="img"></p><h3 id="ç¯å¢ƒéš”ç¦»-namespace"><a href="#ç¯å¢ƒéš”ç¦»-namespace" class="headerlink" title="ç¯å¢ƒéš”ç¦» namespace"></a>ç¯å¢ƒéš”ç¦» namespace</h3><p>ä¸ºäº†ç®¡ç†æœåŠ¡å’Œæ•°æ® åšç¯å¢ƒéš”ç¦»ï¼Œä¸åŒçš„namespaceä¹‹é—´çš„æœåŠ¡ä¸å¯è§ï¼Œæ¯ä¸ªnamespaceéƒ½æœ‰å”¯ä¸€çš„id</p><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/nacos%E7%8E%AF%E5%A2%83%E9%9A%94%E7%A6%BB.PNG" alt="img"></p><p><strong>åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®namespace:</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cloud:</span></span><br><span class="line">  <span class="attr">nacos:</span></span><br><span class="line">    <span class="attr">server-addr:</span> <span class="string">nacos:8848</span> <span class="comment"># nacosæœåŠ¡åœ°å€</span></span><br><span class="line">    <span class="attr">discovery:</span></span><br><span class="line">      <span class="attr">cluster-name:</span> <span class="string">shanghai</span> <span class="comment">#é›†ç¾¤åç§°</span></span><br><span class="line">    <span class="attr">discovery:</span></span><br><span class="line">      <span class="attr">namespace:</span> <span class="string">4d6ce343-9e1b-44df-a90f-2cf2b6b3d177</span> <span class="comment"># å‘½åç©ºé—´ç”Ÿæˆçš„id</span></span><br></pre></td></tr></table></figure><h3 id="Eurekaå’ŒNacosçš„åŒºåˆ«"><a href="#Eurekaå’ŒNacosçš„åŒºåˆ«" class="headerlink" title="Eurekaå’ŒNacosçš„åŒºåˆ«"></a>Eurekaå’ŒNacosçš„åŒºåˆ«</h3><p>Nacosçš„â€œå¿ƒè·³ç»­çº¦â€é€Ÿåº¦æ¯”Eurekaå¿«</p><p>Nacosåœ¨è¿›è¡Œè¿œç¨‹è°ƒç”¨æ—¶ï¼Œé‡‡ç”¨ä¸¤ç§è°ƒç”¨æ¨¡å¼ï¼Œä¸´æ—¶å®ä¾‹å’Œéä¸´æ—¶å®ä¾‹ã€‚éä¸´æ—¶å®ä¾‹ä¸ä¼šå‘æ³¨å†Œä¸­å¿ƒå‘èµ·å¿ƒè·³ç»­çº¦ï¼Œè€Œæ˜¯æ³¨å†Œä¸­å¿ƒä¸»åŠ¨å‘æœåŠ¡æä¾›è€…å‘èµ·è¯¢é—®ï¼Œå¦‚æœéä¸´æ—¶å®ä¾‹å‡ºç°é—®é¢˜ï¼Œæ³¨å†Œä¸­å¿ƒä¸ä¼šå‰”é™¤ï¼Œè€Œæ˜¯ç­‰å¾…éä¸´æ—¶å®ä¾‹æ¢å¤ã€‚</p><p>Eurekaçš„æœåŠ¡æä¾›è€…åªä¼šå‘æ³¨å†Œä¸­å¿ƒå‘èµ·æ‹‰å–æä¾›è€…ä¿¡æ¯ï¼Œè€ŒNacosé™¤äº†æ‹‰å–ï¼Œè¿˜ä¼šä¸»åŠ¨å‘æ¶ˆè´¹è€…æ¨é€å˜æ›´ä¿¡æ¯ã€‚</p><p>Nacosè®¾ç½®ä¸´æ—¶å®ä¾‹å’Œéä¸´æ—¶å®ä¾‹,é»˜è®¤ä¸ºä¸´æ—¶å®ä¾‹</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cloud:</span></span><br><span class="line">  <span class="attr">nacos:</span></span><br><span class="line">    <span class="attr">server-addr:</span> <span class="string">nacos:8848</span> <span class="comment"># nacosæœåŠ¡åœ°å€</span></span><br><span class="line">    <span class="attr">discovery:</span></span><br><span class="line">      <span class="attr">cluster-name:</span> <span class="string">shanghai</span> <span class="comment">#é›†ç¾¤åç§°</span></span><br><span class="line">    <span class="attr">discovery:</span></span><br><span class="line">      <span class="attr">namespace:</span> <span class="string">4d6ce343-9e1b-44df-a90f-2cf2b6b3d177</span> <span class="comment"># devç¯å¢ƒ</span></span><br><span class="line">      <span class="attr">ephemeral:</span> <span class="literal">false</span> <span class="comment"># æ˜¯å¦æ˜¯ä¸´æ—¶å®ä¾‹</span></span><br></pre></td></tr></table></figure><h3 id="Nacosé…ç½®ç®¡ç†"><a href="#Nacosé…ç½®ç®¡ç†" class="headerlink" title="Nacosé…ç½®ç®¡ç†"></a>Nacosé…ç½®ç®¡ç†</h3><p>é…ç½®ç®¡ç†ç”¨æ¥è®°å½•å„ä¸ªå¾®æœåŠ¡çš„é…ç½®ï¼Œå½“å¾®æœåŠ¡é…ç½®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯ä»¥é€šè¿‡é…ç½®ç®¡ç†æœåŠ¡è¿›è¡Œçƒ­æ›´æ–°<br>é€šå¸¸ç”¨æ¥é…ç½®ä¸€äº›ç»å¸¸éœ€è¦å˜æ›´çš„é…ç½®</p><ol><li><p>åˆ›å»ºé…ç½®<img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/nacos%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86.png" alt="img"></p></li><li><p>å¾®æœåŠ¡è·å–é…ç½®ç®¡ç†æ­¥éª¤<img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/nacos%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86%E6%89%A7%E8%A1%8C%E6%AD%A5%E9%AA%A4.PNG" alt="img"></p><blockquote><p>æƒ³è¦è¯»å–nacosé…ç½®æ–‡ä»¶å°±è¦çŸ¥é“nacosåœ°å€ï¼Œnacosä¸€èˆ¬æ”¾åœ¨æœ¬åœ°é…ç½®æ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥è¦æŠŠnacosåœ°å€å’Œç›¸å…³çš„ä¿¡æ¯æ”¾åœ¨åˆ›å»ºçš„bootstrap.ymlæ–‡ä»¶é‡Œï¼Œå› ä¸ºbootstrapæ–‡ä»¶çš„ä¼˜å…ˆçº§é«˜äºapplicationæ–‡ä»¶</p></blockquote></li><li><p>å¼•å…¥é…ç½®ç®¡ç†å®¢æˆ·ç«¯ä¾èµ–</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--nacosçš„é…ç½®ç®¡ç†ä¾èµ–--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-config&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºbootstrapæ–‡ä»¶ï¼Œæ·»åŠ é…ç½®ä¿¡æ¯</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">userservice</span> <span class="comment">#æœåŠ¡åç§°</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span> <span class="comment"># ç¯å¢ƒ</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">localhost:8848</span> <span class="comment"># nacosåœ°å€</span></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">        <span class="attr">file-extension:</span> <span class="string">yaml</span> <span class="comment"># æ–‡ä»¶åç¼€å</span></span><br></pre></td></tr></table></figure><blockquote><p>æŠŠapplicationé…ç½®æ–‡ä»¶ä¸­ç›¸åŒçš„é…ç½®åˆ é™¤</p></blockquote></li></ol><h3 id="å…·ä½“ä½¿ç”¨ç»†èŠ‚"><a href="#å…·ä½“ä½¿ç”¨ç»†èŠ‚" class="headerlink" title="å…·ä½“ä½¿ç”¨ç»†èŠ‚"></a>å…·ä½“ä½¿ç”¨ç»†èŠ‚</h3><h4 id="Nacosé…ç½®ç®¡ç†å®ç°çƒ­æ›´æ–°"><a href="#Nacosé…ç½®ç®¡ç†å®ç°çƒ­æ›´æ–°" class="headerlink" title="Nacosé…ç½®ç®¡ç†å®ç°çƒ­æ›´æ–°"></a>Nacosé…ç½®ç®¡ç†å®ç°çƒ­æ›´æ–°</h4><p>ä¸€ç§ä½¿ç”¨@Valueæ³¨è§£æ³¨å…¥ï¼Œç»“åˆ@RefreshScopeæ¥åˆ·æ–°<br>å¦ä¸€ç§ä½¿ç”¨@ConfigurationPropertiesæ³¨å…¥</p><blockquote><p>å…·ä½“æ“ä½œçœ‹è§†é¢‘å§ï¼Œæœ‰æ—¶å€™å†™å‡ºæ¥æ²¡è§†é¢‘å¥½ç†è§£ã€‚</p><p><a href="https://www.bilibili.com/video/BV1LQ4y127n4?p=27">Nacosé…ç½®ç®¡ç†å®ç°çƒ­æ›´æ–°</a></p></blockquote><h4 id="Nacoså®ç°å¤šä¸ªç¯å¢ƒå…±äº«åŒä¸ªé…ç½®æ–‡ä»¶"><a href="#Nacoså®ç°å¤šä¸ªç¯å¢ƒå…±äº«åŒä¸ªé…ç½®æ–‡ä»¶" class="headerlink" title="Nacoså®ç°å¤šä¸ªç¯å¢ƒå…±äº«åŒä¸ªé…ç½®æ–‡ä»¶"></a>Nacoså®ç°å¤šä¸ªç¯å¢ƒå…±äº«åŒä¸ªé…ç½®æ–‡ä»¶</h4><p>åº”ç”¨åœºæ™¯å°±æ˜¯ç›¸åŒçš„æ•°æ®ä¿¡æ¯æ”¾åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼Œè®©å¤šä¸ªç¯å¢ƒæ¥è°ƒç”¨ã€‚</p><blockquote><p><a href="https://www.bilibili.com/video/BV1LQ4y127n4?p=28">å¤šä¸ªç¯å¢ƒå®ç°å…±äº«æ–‡ä»¶</a></p></blockquote><p><strong>é…ç½®æ–‡ä»¶çš„ä¼˜å…ˆçº§ï¼šnacoså½“å‰ç¯å¢ƒé…ç½®&gt;å…±åŒç¯å¢ƒé…ç½®&gt;æœ¬åœ°é…ç½®</strong></p><blockquote><p>æœåŠ¡å.profile.yaml&gt;æœåŠ¡åç§°.yaml&gt;æœ¬åœ°é…ç½®</p></blockquote><h3 id="Nacosé›†ç¾¤æ­å»º"><a href="#Nacosé›†ç¾¤æ­å»º" class="headerlink" title="Nacosé›†ç¾¤æ­å»º"></a>Nacosé›†ç¾¤æ­å»º</h3><p><a href="https://www.bilibili.com/video/BV1LQ4y127n4?p=29">è¿™æ­¥éª¤å†™å‡ºæ¥å¤ªæŠ½è±¡ä¸å¦‚å·ä¸ªæ‡’è´´ä¸ªååˆ†é’Ÿå·¦å³çš„è§†é¢‘ğŸ˜</a></p><blockquote><p>è¦ä½¿ç”¨åˆ°Nginxåšè´Ÿè½½å‡è¡¡</p></blockquote><h2 id="GateWay"><a href="#GateWay" class="headerlink" title="GateWay"></a>GateWay</h2><p>ç½‘å…³ç”¨æ¥å¯¹å‘é€è¿‡æ¥çš„è¯·æ±‚è¿›è¡Œèº«ä»½å’Œæƒé™çš„éªŒè¯ã€é™æµã€æœåŠ¡è·¯ç”±ã€è´Ÿè½½å‡è¡¡ç­‰</p><ul><li><p>gateway</p><blockquote><p>åŸºäºspringæä¾›çš„WebFluxï¼Œå±äºå“åº”å¼ç¼–ç¨‹çš„å®ç°ï¼Œæ€§èƒ½å¥½</p></blockquote></li><li><p>zuul</p><blockquote><p>åŸºäºservletçš„å®ç°ï¼Œå±äºé˜»å¡å¼ç¼–ç¨‹</p></blockquote></li></ul><h3 id="å¦‚ä½•æ­å»ºç½‘å…³"><a href="#å¦‚ä½•æ­å»ºç½‘å…³" class="headerlink" title="å¦‚ä½•æ­å»ºç½‘å…³"></a>å¦‚ä½•æ­å»ºç½‘å…³</h3><ol><li><p>åˆ›å»ºä¸€ä¸ªç½‘å…³æ¨¡å—</p></li><li><p>å¼•å…¥ä¾èµ–</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--nacosæœåŠ¡æ³¨å†Œå‘ç°ä¾èµ–,æœ‰è¿™ä¸ªæ³¨å†Œå‘ç°ï¼Œæ‰èƒ½ä½¿ç”¨gatewayå’Œå…¶ä»–ç»„ä»¶--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!--ç½‘å…³gatewayä¾èµ–--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®ç½‘å…³é…ç½®ä¿¡æ¯</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Server:</span></span><br><span class="line"><span class="string">port:10086</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">gateway</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">nacos:8848</span> <span class="comment"># nacosåœ°å€</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service</span> <span class="comment"># è·¯ç”±æ ‡ç¤ºï¼Œå¿…é¡»å”¯ä¸€</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://userservice</span> <span class="comment"># è·¯ç”±çš„ç›®æ ‡åœ°å€</span></span><br><span class="line">          <span class="attr">predicates:</span> <span class="comment"># è·¯ç”±æ–­è¨€ï¼Œåˆ¤æ–­è¯·æ±‚æ˜¯å¦ç¬¦åˆè§„åˆ™</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/user/**</span> <span class="comment"># è·¯å¾„æ–­è¨€ï¼Œåˆ¤æ–­è·¯å¾„æ˜¯å¦æ˜¯ä»¥/userå¼€å¤´ï¼Œå¦‚æœæ˜¯åˆ™ç¬¦åˆ</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">order-service</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://orderservice</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/order/**</span></span><br></pre></td></tr></table></figure></li></ol><p><strong>predicateå¯å®šä¹‰çš„è§„åˆ™è¿˜æœ‰å¾ˆå¤šï¼š</strong></p><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/%E6%96%AD%E8%A8%80%E5%B7%A5%E5%8E%82.PNG" alt="img"></p><p><strong>ç”¨æˆ·å‘èµ·è¯·æ±‚æ‰§è¡Œæµç¨‹ï¼š</strong></p><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/%E8%AF%B7%E6%B1%82%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B.PNG" alt="img"></p><h3 id="è·¯ç”±è¿‡æ»¤å™¨"><a href="#è·¯ç”±è¿‡æ»¤å™¨" class="headerlink" title="è·¯ç”±è¿‡æ»¤å™¨"></a>è·¯ç”±è¿‡æ»¤å™¨</h3><p>GatewayFilterå¯ä»¥å¯¹è¿›å…¥ç½‘å…³çš„è¯·æ±‚å’Œå¾®æœåŠ¡è¿”å›çš„å“åº”åšå¤„ç†</p><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/%E7%BD%91%E5%85%B3%E8%BF%87%E6%BB%A4%E5%99%A8.PNG" alt="img"></p><p>åœ¨ç½‘å…³é…ç½®æ–‡ä»¶ä¸­é…ç½®è¿‡æ»¤å™¨å³å¯ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">      <span class="attr">default-filters:</span>  <span class="comment">#é»˜è®¤å¯¹æ‰€æœ‰çš„è·¯ç”±éƒ½ç”Ÿæ•ˆ</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">AddRequestHeader=Truth,Itcast</span> <span class="string">is</span> <span class="string">freaking</span> <span class="string">awesome!</span></span><br><span class="line"><span class="comment">#      fileter:  #å•ç‹¬æ·»åŠ è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment">#        - AddRequestHeader=Truth,Itcast is 666!</span></span><br></pre></td></tr></table></figure><h4 id="GlobalFilter"><a href="#GlobalFilter" class="headerlink" title="GlobalFilter"></a>GlobalFilter</h4><p>å¯ä»¥è‡ªå®šä¹‰è¿‡æ»¤è§„åˆ™çš„è¿‡æ»¤å™¨</p><p>å®ç°è¿‡ç¨‹ï¼šå®šä¹‰ä¸€ä¸ªç±»ï¼Œå®ç°GlobalFilteræ¥å£ï¼Œé‡å†™æ–¹æ³•</p><p>è¦æ±‚ï¼šåˆ¤æ–­æ˜¯å¦æ˜¯adminè´¦æˆ·åç™»å½•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Order(-1)</span> <span class="comment">//å€¼è¶Šå°ï¼Œä¼˜å…ˆæ‰§è¡Œè¯¥è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AuthorizeFilter</span> <span class="keyword">implements</span> <span class="title">GlobalFilter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Mono&lt;Void&gt; <span class="title">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1.è·å–è¯·æ±‚å‚æ•°</span></span><br><span class="line">        ServerHttpRequest request = exchange.getRequest();</span><br><span class="line">        MultiValueMap&lt;String, String&gt; params = request.getQueryParams();</span><br><span class="line">        <span class="comment">// 2.è·å–å‚æ•°ä¸­çš„ authorization å‚æ•°</span></span><br><span class="line">        String auth = params.getFirst(<span class="string">&quot;authorization&quot;</span>);</span><br><span class="line">        <span class="comment">// 3.åˆ¤æ–­å‚æ•°å€¼æ˜¯å¦ç­‰äº admin</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;admin&quot;</span>.equals(auth)) &#123;</span><br><span class="line">            <span class="comment">// 4.æ˜¯ï¼Œæ”¾è¡Œ</span></span><br><span class="line">            <span class="keyword">return</span> chain.filter(exchange);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 5.å¦ï¼Œæ‹¦æˆª</span></span><br><span class="line">        <span class="comment">// 5.1.è®¾ç½®çŠ¶æ€ç </span></span><br><span class="line">        exchange.getResponse().setStatusCode(HttpStatus.UNAUTHORIZED);</span><br><span class="line">        <span class="comment">// 5.2.æ‹¦æˆªè¯·æ±‚</span></span><br><span class="line">        <span class="keyword">return</span> exchange.getResponse().setComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåº"><a href="#è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåº" class="headerlink" title="è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåº"></a>è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåº</h3><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/%E8%BF%87%E6%BB%A4%E5%99%A8%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F.PNG" alt="img"></p><h3 id="å¤„ç†è·¨åŸŸé—®é¢˜"><a href="#å¤„ç†è·¨åŸŸé—®é¢˜" class="headerlink" title="å¤„ç†è·¨åŸŸé—®é¢˜"></a>å¤„ç†è·¨åŸŸé—®é¢˜</h3><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E7%9A%84%E5%A4%84%E7%90%86.PNG" alt="img"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>spring cloudæŠŠé¡¹ç›®ç»†åˆ†ä¸ºå¾ˆå¤šæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—åˆç»†åˆ†ä¸ºå¾ˆå¤šå®ä¾‹ã€‚æ”¯æŒçš„ç»„ä»¶ä¸°å¯Œã€‚</p><p>Dubboæ²¡æœ‰å’Œspring cloudç›¸æ¯”èµ·æ¥ï¼ŒåŠŸèƒ½æ²¡æœ‰springcloudå®Œå–„ã€‚</p><p>å…·ä½“è¿˜æ˜¯è¦ä½¿ç”¨èµ·æ¥æ‰æœ‰æ›´æ·±çš„ç†è§£</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://www.bilibili.com/video/BV1LQ4y127n4?p=1">ä¼ æ™ºæ’­å®¢</a></p>]]></content>
      
      
      <categories>
          
          <category> å¾®æœåŠ¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
            <tag> Spring Cloud </tag>
            
            <tag> å¾®æœåŠ¡ </tag>
            
            <tag> Ribbon </tag>
            
            <tag> Nacos </tag>
            
            <tag> Feign </tag>
            
            <tag> GateWay </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dubbo</title>
      <link href="/2021/08/18/Dubbo/"/>
      <url>/2021/08/18/Dubbo/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><blockquote><p><strong>é›†ç¾¤ï¼š</strong>å¾ˆå¤šâ€œäººâ€ä¸€èµ·åšç›¸åŒçš„äº‹ã€‚ä¸€ä¸ªä¸šåŠ¡éƒ¨ç½²åœ¨å¤šå°æœåŠ¡å™¨ä¸Š</p><p><strong>åˆ†å¸ƒå¼:</strong> å¾ˆå¤šâ€œäººâ€ä¸€èµ·åšä¸ç›¸åŒçš„äº‹ï¼Œè¿™äº›ä¸ç›¸åŒçš„äº‹åˆèµ·æ¥æ˜¯ä¸€ä»¶å¤§äº‹ã€‚ä¸€ä¸ªä¸šåŠ¡åˆ†è§£æˆä¸åŒçš„æ¨¡å—ï¼Œéƒ¨ç½²åœ¨ä¸åŒçš„æœºå™¨ä¸Š</p><p><strong>Dubbo</strong>æ˜¯SOAæ¶æ„æ—¶ä»£çš„äº§ç‰©ï¼ŒSpringCloudæ˜¯å¾®æœåŠ¡æ—¶ä»£äº§ç‰©ã€‚å¯¹äºäº’è”ç½‘é¡¹ç›®æ¥è¯´ï¼Œä¸¤è€…éƒ½å¯ä»¥é€‰æ‹©ã€‚</p></blockquote><p><a href="https://dubbo.apache.org/zh/">Dubbo</a><strong>æ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„ä¸€ä¸ªé«˜æ€§èƒ½ã€è½»é‡çº§çš„Java RPC(è¿œç¨‹æœåŠ¡è°ƒç”¨)æ¡†æ¶</strong>ï¼Œåæ¥è¢«Apacheæ”¶å½•.</p><p><strong>Dubboæ¶æ„å›¾</strong></p><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/dubbo%E6%9E%B6%E6%9E%84%E5%9B%BE.jpg"></p><ul><li>é¦–å…ˆå¯åŠ¨æä¾›è€…ï¼ˆ0ï¼‰</li><li>ç„¶åä¼šå°†ipç«¯å£ã€é“¾æ¥ç­‰æ”¾åœ¨åˆ°æ³¨å†Œä¸­å¿ƒï¼ˆ1ï¼‰</li><li>é¡¾å®¢æƒ³è°ƒç”¨æœåŠ¡ï¼Œä¼šå»æ³¨å†Œä¸­å¿ƒå‘ç°æœåŠ¡çš„ç«¯å£é“¾æ¥ç­‰ä¿¡æ¯ï¼ˆ2ï¼‰</li><li>æ³¨å†Œä¸­å¿ƒåœ¨è¿”å›ç»™é¡¾å®¢ï¼ˆ3ï¼‰</li><li>æœ€åé¡¾å®¢å»è°ƒç”¨æœåŠ¡ï¼ˆ4ï¼‰</li><li>è°ƒç”¨è¿‡ç¨‹ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚Monitorç”¨æ¥åšç›‘æ§ã€‚</li></ul><p><strong>Dubbo</strong>å®˜æ–¹æ¨èä½¿ç”¨<strong>ZooKeeper</strong>ä½œä¸ºæ³¨å†Œä¸­å¿ƒã€‚</p><p>ç®€å•æ¯”å–»æ¥è¯´ï¼Œå°±æ˜¯å°†ä»¥å‰å†™çš„é¡¹ç›®ä¸­çš„serviceå’Œå’Œcontrolleråˆ†ç¦»å‡ºæ¥ï¼ŒåŸæ¥å†™åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œç°åœ¨åˆ†åˆ«åˆ›å»ºä¸¤ä¸ªé¡¹ç›®æ¥å†™serviceå’Œcontrollerã€‚<br>serviceä½œä¸ºæä¾›æœåŠ¡è€…ï¼ˆproviderï¼‰ï¼Œåœ¨applicationé…ç½®æ–‡ä»¶ä¸­ï¼Œå°†è‡ªå·±æŒ‡å®šåˆ°æ³¨å†Œä¸­å¿ƒã€‚<br>controllerä½œä¸ºæ¶ˆè´¹è€…ï¼ˆconsumerï¼‰ï¼Œä¹Ÿéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šåˆ°æ³¨å†Œä¸­å¿ƒ</p><h2 id="Spring-Bootæ•´åˆDubbo"><a href="#Spring-Bootæ•´åˆDubbo" class="headerlink" title="Spring Bootæ•´åˆDubbo"></a>Spring Bootæ•´åˆDubbo</h2><ol><li><p>æœåŠ¡æä¾›æ–¹å’Œæ¶ˆè´¹æ–¹çš„pomä¸­å¯¼å…¥dubboçš„spring boot<a href="https://github.com/apache/dubbo-spring-boot-project/blob/master/README_CN.md">ä¾èµ–</a></p></li><li><p>æä¾›æ–¹åœ¨applicationé…ç½®æ–‡ä»¶ä¸­è¿›è¡Œæ³¨å†Œï¼Œç„¶ååœ¨éœ€è¦æä¾›çš„æ¥å£å®ç°ç±»(ä¹Ÿå°±æ˜¯è¯´è¦æä¾›çš„æœåŠ¡)ä¸Šï¼Œä½¿ç”¨@Serverå°†è¿™ä¸ªæœåŠ¡æš´éœ²å‡ºæ¥</p><blockquote><p> æ³¨æ„ï¼ä¸€å®šè¦å¯¼å…¥Dubboçš„@ServeråŒ…</p></blockquote></li><li><p>æ¶ˆè´¹æ–¹ç¼–å†™controlleræ¥æ”¶æä¾›æ–¹çš„æ¥å£ï¼Œç¼–å†™å’Œæ¥å£ç›¸åŒçš„serviceæ¥å£ï¼Œä½¿ç”¨@Referenceå°†æ¥å£æ³¨å…¥åˆ°controllerä¸­</p></li><li><p>å¯ä»¥å°†serviceå’Œcontrollerä¸­ç›¸åŒçš„æ¥å£æŠ½å–å‡ºæ¥ç”Ÿæˆä¸€ä¸ªæ–°çš„æ¨¡å—ï¼Œç„¶ååœ¨serviceå’Œcontrollerçš„pomæ–‡ä»¶ä¸­å¯¼å…¥è¿™ä¸ªå¿ƒæ¨¡å—å³å¯</p></li></ol><p><strong>é¡¹ç›®ç»“æ„ç¤ºä¾‹</strong>ï¼š</p><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/dubbo%E7%BB%93%E6%9E%84.png"></p><p><strong>Provideré…ç½®æ–‡ä»¶ï¼š</strong></p><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/%E6%8F%90%E4%BE%9B%E8%80%85%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.png"></p><p><strong>Consumeré…ç½®æ–‡ä»¶ï¼š</strong></p><p><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/%E6%B6%88%E8%B4%B9%E8%80%85%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.png"></p><p><strong>æƒ³ä½¿ç”¨Dubboï¼Œè¦å…ˆå¯ç”¨zookeeperå’ŒDubboçš„ç›‘æ§ä¸­å¿ƒ</strong></p><h2 id="å¯åŠ¨æ—¶æ£€æŸ¥"><a href="#å¯åŠ¨æ—¶æ£€æŸ¥" class="headerlink" title="å¯åŠ¨æ—¶æ£€æŸ¥"></a>å¯åŠ¨æ—¶æ£€æŸ¥</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt; dubbo:consumer check=&quot;false | true&quot; / &gt;</span><br></pre></td></tr></table></figure><p>åœ¨æ•´ä¸ªæœåŠ¡å¯åŠ¨æ—¶ï¼Œæ³¨å†Œä¸­å¿ƒä¼šæ£€æŸ¥æ¶ˆè´¹æ–¹å’Œæä¾›æ–¹æ˜¯å¦å­˜åœ¨äºæ³¨å†Œä¸­å¿ƒã€‚é»˜è®¤ä¸ºtrueå¼€å¯è‡ªåŠ¨æ£€æŸ¥ï¼Œå¦‚æœæœ‰ä¸€æ–¹æ²¡æœ‰åœ¨æ³¨å†Œä¸­å¿ƒï¼Œæ¯”å¦‚æä¾›æ–¹æ²¡æœ‰åœ¨æ³¨å†Œä¸­ï¼Œå¯åŠ¨æ¶ˆè´¹æ–¹æ—¶ï¼Œå°±ä¼šæŠ¥é”™ã€‚<br>å°†checkè®¾ç½®ä¸ºfalseï¼Œåˆ™ä¸ä¼šå¯ç”¨è‡ªåŠ¨æ£€æŸ¥ï¼Œåªæœ‰åœ¨ç›¸äº’è°ƒç”¨æ—¶æ‰ä¼šå¯åŠ¨æ£€æŸ¥ã€‚</p><h2 id="è¿æ¥è¶…æ—¶"><a href="#è¿æ¥è¶…æ—¶" class="headerlink" title="è¿æ¥è¶…æ—¶"></a>è¿æ¥è¶…æ—¶</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt; dubbo: timeout=&quot;3000&quot; / &gt;</span><br></pre></td></tr></table></figure><p>é»˜è®¤ä¸º1000ä¹Ÿå°±æ˜¯ä¸€ç§’ã€‚é€šè¿‡è®¾ç½®è¿æ¥è¶…æ—¶ï¼Œå¯ä»¥é˜²æ­¢æ¶ˆè´¹æ–¹åœ¨è·å–æœåŠ¡æ—¶é€ æˆçº¿ç¨‹é˜»å¡ã€‚</p><h2 id="é‡è¯•æ¬¡æ•°"><a href="#é‡è¯•æ¬¡æ•°" class="headerlink" title="é‡è¯•æ¬¡æ•°"></a>é‡è¯•æ¬¡æ•°</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt; dubbo: timeout=&quot;3000&quot; retires=&quot;3&quot; / &gt;</span><br></pre></td></tr></table></figure><p>å½“ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶å¤±è´¥ï¼Œä¼šé¢å¤–åœ¨è¿›è¡Œ3æ¬¡é‡æ–°è°ƒç”¨ã€‚</p><h2 id="å¤šç‰ˆæœ¬"><a href="#å¤šç‰ˆæœ¬" class="headerlink" title="å¤šç‰ˆæœ¬"></a>å¤šç‰ˆæœ¬</h2><p>å½“æ·»åŠ æ–°åŠŸèƒ½åï¼Œå¯ä»¥è®©ä¸€éƒ¨åˆ†ç”¨æˆ·ä½¿ç”¨æ–°åŠŸèƒ½ç‰ˆæœ¬ï¼Œå½“æ–°ç‰ˆæœ¬åŠŸèƒ½ç¨³å®šåï¼Œå°†å‰©ä¸‹çš„è€ç‰ˆæœ¬å…¨æ›¿æ¢ä¸ºæ–°ç‰ˆæœ¬</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dubbo:version=1.00</span><br></pre></td></tr></table></figure><h2 id="åºåˆ—åŒ–"><a href="#åºåˆ—åŒ–" class="headerlink" title="åºåˆ—åŒ–"></a>åºåˆ—åŒ–</h2><p>å½“æ¶ˆè´¹è€…å‘æä¾›è€…æŸ¥è¯¢å¯¹è±¡æ•°æ®æ—¶ï¼Œæä¾›è€…åœ¨æ•°æ®åº“ä¸­æŸ¥è¯¢åï¼Œå°†æ•°æ®å°è£…å‘é€ç»™æ¶ˆè´¹è€…ï¼Œè¿™ä¸¤ä¸ªæ¨¡å—ä¹‹é—´ä¼ è¾“å¯¹è±¡å°±è¦ä½¿ç”¨åˆ°åºåˆ—åŒ–ã€‚<br>Dubboå†…éƒ¨å·²ç»å°è£…å¥½åºåˆ—åŒ–ï¼Œä½¿ç”¨æ—¶åªéœ€è¦åœ¨pojoåˆ›å»ºçš„ç±»å®ç°Serializableæ¥å£ã€‚</p><blockquote><p>è¿™é‡Œåˆ›å»ºå¯¹è±¡çš„pojoä¹Ÿæ˜¯å•ç‹¬çš„æ¨¡å—ï¼Œåœ¨æ¥å£æ¨¡å—pomä¸­å¯¼å…¥pojoæ¨¡å—å³å¯ä½¿ç”¨</p></blockquote><h2 id="åœ°å€ç¼“å­˜"><a href="#åœ°å€ç¼“å­˜" class="headerlink" title="åœ°å€ç¼“å­˜"></a>åœ°å€ç¼“å­˜</h2><blockquote><p>é¢è¯•é¢˜ï¼š<br>æ³¨å†Œä¸­å¿ƒæŒ‚äº†ï¼Œè¿˜èƒ½è®¿é—®æœåŠ¡ä¹ˆï¼Ÿ</p><p>å¯ä»¥ï¼ŒDubboæ¶ˆè´¹è€…ç¬¬ä¸€æ¬¡è°ƒç”¨æä¾›è€…æ—¶ï¼Œä¼šä»æ³¨å†Œä¸­å¿ƒè·å–åœ°å€ï¼Œå°†åœ°å€ç¼“å­˜åˆ°æœ¬åœ°ï¼Œä»¥åè®¿é—®çš„æ—¶å€™ä¸ä¼šåœ¨è®¿é—®æ³¨å†Œä¸­å¿ƒã€‚<br>å¦‚æœæä¾›è€…çš„åœ°å€å‘ç”Ÿå˜åŒ–ï¼Œæ³¨å†Œä¸­å¿ƒä¼šé€šçŸ¥æ¶ˆè´¹è€…ï¼Œæ¶ˆè´¹è€…çš„æœ¬åœ°ç¼“å­˜ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–</p></blockquote><h2 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h2><p><strong>Dubboæä¾›äº†å››ç§ç­–ç•¥ï¼š</strong></p><ol><li>Randomã€‚æŒ‰æƒé‡éšæœºï¼Œé»˜è®¤æƒé‡ä¸º100ã€‚æƒé‡å¯ä»¥è®¾ç½®æ›´æ”¹</li><li>RoundRobnã€‚æŒ‰æƒé‡è½®è¯¢ã€‚æƒé‡ç›¸åŒï¼ŒæŒ‰ç…§1ã€2ã€3â€¦è¿™æ ·ä¾æ¬¡æ¥ã€‚æƒé‡é«˜ï¼Œä¼šä¼˜å…ˆè®¿é—®</li><li>LeastActiveã€‚æœ€å°‘æ´»è·ƒè°ƒç”¨æ•°ã€‚ä¼˜å…ˆè®¿é—®é€Ÿåº¦å¿«çš„æœåŠ¡æä¾›è€…ã€‚é€Ÿåº¦ç›¸åŒï¼Œåˆ™éšæœº</li><li>ConsistenHashã€‚ä¸€è‡´æ€§Hashã€‚è¯·æ±‚çš„å‚æ•°ç›¸åŒï¼Œåˆ™è¯·æ±‚åˆ°åŒä¸€ä¸ªæä¾›è€…</li></ol><h2 id="é›†ç¾¤å®¹é”™"><a href="#é›†ç¾¤å®¹é”™" class="headerlink" title="é›†ç¾¤å®¹é”™"></a>é›†ç¾¤å®¹é”™</h2><p>æœåŠ¡æä¾›è€…æä¾›äº†ä¸‰å°æä¾›æœåŠ¡å™¨ï¼Œå½“æ¶ˆè´¹è€…è°ƒç”¨Aå°æœåŠ¡å™¨æ—¶å‘ç”Ÿé”™è¯¯æ—¶ï¼Œå¤„ç†æ–¹æ³•å¦‚ä¸‹ï¼š</p><p><strong>é›†ç¾¤å®¹é”™æ¨¡å¼ï¼š</strong></p><ol><li><p>Failover Cluster</p><blockquote><p> å¤±è´¥é‡è¯•ï¼Œé»˜è®¤é‡è¯•2æ¬¡ã€‚è®¿é—®Aå°æœåŠ¡å™¨å‡ºé”™ï¼Œä¼šå»è®¿é—®Bï¼ŒBå‡ºé”™è®¿é—®Dï¼Œè¿™ä¸¤æ¬¡å…¨éƒ¨å‡ºé”™ï¼Œåˆ™æŠ¥å¼‚å¸¸.ä¸€èˆ¬ç”¨äºè¯»æ“ä½œã€‚ä½¿ç”¨retriesé…ç½®</p></blockquote></li><li><p>Failfast Cluster</p><blockquote><p>å¿«é€Ÿå¤±è´¥ã€‚åªå‘èµ·ä¸€æ¬¡è°ƒç”¨ï¼Œå¤±è´¥å°±æŠ¥é”™ã€‚ç”¨äºå†™æ“ä½œ</p></blockquote></li><li><p>Failsafe Cluster</p><blockquote><p>å¤±è´¥å®‰å…¨ï¼Œå‡ºç°å¼‚å¸¸ï¼Œç›´æ¥å¿½ç•¥ï¼Œè¿”å›ç©ºç»“æœã€‚ç”¨äºæ—¥å¿—</p></blockquote></li><li><p>Failback Cluster</p><blockquote><p>å¤±è´¥åè‡ªåŠ¨æ¢å¤ï¼Œå½“è¯·æ±‚å¤±è´¥åï¼Œä¼šå®šæ—¶è‡ªåŠ¨å‘è¯·æ±‚ï¼Œç›´åˆ°æˆåŠŸä¸ºæ­¢ã€‚</p></blockquote></li><li><p>Forking Cluster</p><blockquote><p>å¹¶è¡Œè°ƒç”¨å¤šä¸ªæœåŠ¡å™¨ï¼Œåªè¦æœ‰ä¸€ä¸ªæˆåŠŸå³æˆåŠŸã€‚å¹¿æ’’ç½‘ï¼Œæåˆ°ä¸€ä¸ªå°±èµšã€‚è€—æ€§èƒ½</p></blockquote></li><li><p>Broadcast Cluster</p><blockquote><p>å¹¿æ’­æ‰€æœ‰æä¾›è€…ï¼Œé€ä¸ªè°ƒç”¨ï¼Œæœ‰ä¸€ä¸ªæŠ¥é”™åˆ™æŠ¥é”™</p></blockquote></li></ol><h2 id="æœåŠ¡é™çº§"><a href="#æœåŠ¡é™çº§" class="headerlink" title="æœåŠ¡é™çº§"></a>æœåŠ¡é™çº§</h2><p>æ¯”å¦‚æä¾›å¹¿å‘Šã€æ”¯ä»˜ã€æ¸¸æˆå¤šä¸ªæœåŠ¡ï¼ŒæœåŠ¡å™¨æ€§èƒ½ä¸å¤Ÿï¼Œå¯ä»¥å°†æŸä¸ªæœåŠ¡é™çº§</p><p><strong>é™çº§æ–¹å¼ï¼š</strong></p><ol><li><p>mock=force:return null </p><blockquote><p>æ¶ˆè´¹è€…è°ƒç”¨è¯¥æ–¹æ³•å…¨éƒ¨è¿”å›nullï¼Œç”¨æ¥å±è”½ä¸é‡è¦çš„æœåŠ¡ï¼Œä¸ä¼šå‘èµ·è¿œç¨‹è°ƒç”¨</p></blockquote></li><li><p>mock=fail:return null </p><blockquote><p>æ¶ˆè´¹è€…åœ¨è°ƒç”¨æœåŠ¡å‘ç”Ÿé”™è¯¯æ—¶ï¼Œè¿”å›nullã€‚ä¸æŠ›å¼‚å¸¸ã€‚ç”¨æ¥å®¹å¿ä¸é‡è¦æœåŠ¡ åœ¨ä¸ç¨³å®šçš„æ—¶å€™ä¹Ÿå¯ä»¥è°ƒç”¨</p></blockquote></li></ol><h2 id="å°ç»“ï¼š"><a href="#å°ç»“ï¼š" class="headerlink" title="å°ç»“ï¼š"></a>å°ç»“ï¼š</h2><p>å­¦è¿™ä¸ªDubboåœ¨é…ç½®zookeeperæ—¶ï¼Œæ€»æ˜¯æç¤ºä¸€äº›é”™è¯¯ï¼Œå†™å¥½çš„ä»£ç å› ä¸ºè¿™äº›å·¥å…·æŠ¥é”™æ²¡æœ‰å»æµ‹è¯•æ˜¯å¦æˆåŠŸï¼Œæ„Ÿè§‰å­¦äº†ä¸ªç©ºå£³å­ã€‚<br><img src="https://gitee.com/myyyhyyy/blogimg/raw/master/img/%E8%9C%A1%E7%AC%94%E5%B0%8F%E6%96%B0.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> RPCåˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Dubbo </tag>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
            <tag> RPC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitå¸¸ç”¨å‘½ä»¤</title>
      <link href="/2021/08/16/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2021/08/16/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<p>ä¸€äº›å¹³æ—¶ç»å¸¸ä½¿ç”¨çš„å‘½ä»¤<span id="more"></span></p><h3 id="æŸ¥çœ‹çŠ¶æ€"><a href="#æŸ¥çœ‹çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹çŠ¶æ€"></a>æŸ¥çœ‹çŠ¶æ€</h3><blockquote><p>git  status</p></blockquote><h3 id="åˆå§‹åŒ–æœ¬åœ°åº“"><a href="#åˆå§‹åŒ–æœ¬åœ°åº“" class="headerlink" title="åˆå§‹åŒ–æœ¬åœ°åº“"></a>åˆå§‹åŒ–æœ¬åœ°åº“</h3><blockquote><p>git init</p></blockquote><p>åœ¨æœ¬åœ°ç£ç›˜ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä½¿ç”¨gitè¿›å…¥è¯¥æ–‡ä»¶å¤¹ï¼Œä½¿ç”¨git initè¿›è¡Œåˆå§‹åŒ–ï¼Œåˆå§‹åŒ–åä¸è¦ä¿®æ”¹ç”Ÿæˆçš„æ–‡ä»¶</p><h3 id="å°†æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº"><a href="#å°†æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº" class="headerlink" title="å°†æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº"></a>å°†æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº</h3><blockquote><p>git add æ–‡ä»¶å</p></blockquote><h3 id="ä»æš‚å­˜åŒºåˆ é™¤æ–‡ä»¶"><a href="#ä»æš‚å­˜åŒºåˆ é™¤æ–‡ä»¶" class="headerlink" title="ä»æš‚å­˜åŒºåˆ é™¤æ–‡ä»¶"></a>ä»æš‚å­˜åŒºåˆ é™¤æ–‡ä»¶</h3><blockquote><p>git rm â€“cached æ–‡ä»¶å</p></blockquote><h3 id="å°†æš‚å­˜åŒºæ–‡ä»¶æäº¤åˆ°æœ¬åœ°åº“"><a href="#å°†æš‚å­˜åŒºæ–‡ä»¶æäº¤åˆ°æœ¬åœ°åº“" class="headerlink" title="å°†æš‚å­˜åŒºæ–‡ä»¶æäº¤åˆ°æœ¬åœ°åº“"></a>å°†æš‚å­˜åŒºæ–‡ä»¶æäº¤åˆ°æœ¬åœ°åº“</h3><blockquote><p>git commit -m â€œè¯´æ˜ä¿¡æ¯â€ æ–‡ä»¶å</p></blockquote><h3 id="æŸ¥çœ‹ç‰ˆæœ¬æ—¥å¿—ä¿¡æ¯"><a href="#æŸ¥çœ‹ç‰ˆæœ¬æ—¥å¿—ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹ç‰ˆæœ¬æ—¥å¿—ä¿¡æ¯"></a>æŸ¥çœ‹ç‰ˆæœ¬æ—¥å¿—ä¿¡æ¯</h3><blockquote><p>git reflog,ç®€ç•¥</p><p>git log,å®Œæ•´ä¿¡æ¯</p></blockquote><h3 id="ç‰ˆæœ¬ç©¿æ¢­-åˆ‡æ¢ç‰ˆæœ¬"><a href="#ç‰ˆæœ¬ç©¿æ¢­-åˆ‡æ¢ç‰ˆæœ¬" class="headerlink" title="ç‰ˆæœ¬ç©¿æ¢­(åˆ‡æ¢ç‰ˆæœ¬)"></a>ç‰ˆæœ¬ç©¿æ¢­(åˆ‡æ¢ç‰ˆæœ¬)</h3><blockquote><p>git reset â€“hard ç‰ˆæœ¬å·</p></blockquote><h3 id="æŸ¥çœ‹åˆ†æ”¯"><a href="#æŸ¥çœ‹åˆ†æ”¯" class="headerlink" title="æŸ¥çœ‹åˆ†æ”¯"></a>æŸ¥çœ‹åˆ†æ”¯</h3><blockquote><p>git branch -v</p></blockquote><h3 id="åˆ›å»ºåˆ†æ”¯"><a href="#åˆ›å»ºåˆ†æ”¯" class="headerlink" title="åˆ›å»ºåˆ†æ”¯"></a>åˆ›å»ºåˆ†æ”¯</h3><blockquote><p>git branch åˆ†æ”¯å</p></blockquote><h3 id="åˆ‡æ¢åˆ†æ”¯"><a href="#åˆ‡æ¢åˆ†æ”¯" class="headerlink" title="åˆ‡æ¢åˆ†æ”¯"></a>åˆ‡æ¢åˆ†æ”¯</h3><blockquote><p>git checkout åˆ†æ”¯å</p><p>åˆ‡æ¢å›master git checkout master</p></blockquote><h3 id="åˆå¹¶åˆ†æ”¯"><a href="#åˆå¹¶åˆ†æ”¯" class="headerlink" title="åˆå¹¶åˆ†æ”¯"></a>åˆå¹¶åˆ†æ”¯</h3><blockquote><p>git merge åˆ†æ”¯å</p></blockquote><h3 id="å†²çªåˆå¹¶"><a href="#å†²çªåˆå¹¶" class="headerlink" title="å†²çªåˆå¹¶"></a>å†²çªåˆå¹¶</h3><p>ä¸¤ä¸ªåˆ†æ”¯åœ¨åŒä¸€ä¸ªæ–‡ä»¶çš„åŒä¸€ä¸ªä½ç½®ï¼Œæœ‰ä¸¤å¥—ä¸åŒçš„ä¿®æ”¹ï¼Œgitæ— æ³•å†³å®šä½¿ç”¨å“ªä¸€ä¸ªï¼Œå¿…é¡»äººä¸ºå†³å®š</p><p>è¿›å…¥æ–‡ä»¶ï¼Œå°†æ–‡ä»¶ä¸­çš„ã€Šã€Šã€Šã€Š å’Œ====å’Œã€‹ã€‹ã€‹å†…å®¹åˆ é™¤ï¼Œä¿ç•™æƒ³è¦æ›´æ”¹çš„å†…å®¹</p><p>ç„¶åæäº¤æš‚å­˜åŒºã€æäº¤æœ¬åœ°åº“ã€‚æäº¤æœ¬åœ°åº“æ—¶ï¼Œä¸åŠ æ–‡ä»¶åï¼Œä¾‹å¦‚ git commit -m â€œtestâ€</p><h3 id="æŸ¥çœ‹è¿œç¨‹åº“åˆ«å"><a href="#æŸ¥çœ‹è¿œç¨‹åº“åˆ«å" class="headerlink" title="æŸ¥çœ‹è¿œç¨‹åº“åˆ«å"></a>æŸ¥çœ‹è¿œç¨‹åº“åˆ«å</h3><blockquote><p>git remote -v</p></blockquote><h3 id="åˆ›å»ºè¿œç¨‹åº“åˆ«å"><a href="#åˆ›å»ºè¿œç¨‹åº“åˆ«å" class="headerlink" title="åˆ›å»ºè¿œç¨‹åº“åˆ«å"></a>åˆ›å»ºè¿œç¨‹åº“åˆ«å</h3><blockquote><p>git remote add  åˆ«å  é“¾æ¥</p><p>åˆ«åæœ€å¥½å’Œä»“åº“åç›¸åŒ</p></blockquote><h3 id="æ¨é€è¿œç¨‹åº“"><a href="#æ¨é€è¿œç¨‹åº“" class="headerlink" title="æ¨é€è¿œç¨‹åº“"></a>æ¨é€è¿œç¨‹åº“</h3><blockquote><p>git push åˆ«å(æˆ–è€…é“¾æ¥å)  åˆ†æ”¯å</p></blockquote><h3 id="æ‹‰å–è¿œç¨‹åº“"><a href="#æ‹‰å–è¿œç¨‹åº“" class="headerlink" title="æ‹‰å–è¿œç¨‹åº“"></a>æ‹‰å–è¿œç¨‹åº“</h3><blockquote><p>git pull åˆ«å(æˆ–é“¾æ¥å) åˆ†æ”¯å</p></blockquote><h3 id="å…‹éš†è¿œç¨‹åº“åˆ°æœ¬åœ°"><a href="#å…‹éš†è¿œç¨‹åº“åˆ°æœ¬åœ°" class="headerlink" title="å…‹éš†è¿œç¨‹åº“åˆ°æœ¬åœ°"></a>å…‹éš†è¿œç¨‹åº“åˆ°æœ¬åœ°</h3><blockquote><p>git clone é“¾æ¥</p></blockquote><h3 id="ç”Ÿæˆsshå…å¯†ç™»å½•"><a href="#ç”Ÿæˆsshå…å¯†ç™»å½•" class="headerlink" title="ç”Ÿæˆsshå…å¯†ç™»å½•"></a>ç”Ÿæˆsshå…å¯†ç™»å½•</h3><blockquote><p>ssh-keygen -t rsa -C </p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot</title>
      <link href="/2021/08/12/SpringBoot/"/>
      <url>/2021/08/12/SpringBoot/</url>
      
        <content type="html"><![CDATA[<p><strong>08.16ï¼Œæ‰‹æ®‹è¯¯åˆ å·²ç»å†™å¥½çš„spring bootç¬”è®°ï¼Œæ— æ³•æ¢å¤ã€‚</strong></p><p><strong>ç­‰æœ‰æ—¶é—´åœ¨è¡¥å‡ºæ¥ã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> Springå¤§å®¶æ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SSMæ•´åˆ</title>
      <link href="/2021/07/30/SSM%E6%95%B4%E5%90%88/"/>
      <url>/2021/07/30/SSM%E6%95%B4%E5%90%88/</url>
      
        <content type="html"><![CDATA[<p> <a href="https://mp.weixin.qq.com/s/SDxqGu_il3MUCTcN1EYrng">SSMæ¡†æ¶æ•´åˆ</a> <span id="more"></span>åšä¸€ä¸ªå‹¤åŠ³çš„æ¬è¿å·¥(å®é™…å°±æ˜¯æ‡’)</p><p><strong>è§£å†³æµè§ˆå™¨ä¹±ç é—®é¢˜</strong></p><p>åœ¨web.xmlæ–‡ä»¶ä¸­é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--è§£å†³æµè§ˆå™¨ä¹±ç é—®é¢˜--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Springå¤§å®¶æ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SSM </tag>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatis</title>
      <link href="/2021/07/19/MyBatis/"/>
      <url>/2021/07/19/MyBatis/</url>
      
        <content type="html"><![CDATA[<h2 id="æ‰¯ä¸€ä¸‹ï¼š"><a href="#æ‰¯ä¸€ä¸‹ï¼š" class="headerlink" title="æ‰¯ä¸€ä¸‹ï¼š"></a>æ‰¯ä¸€ä¸‹ï¼š</h2><p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨MyBatis</strong></p><span id="more"></span><ul><li>ç®€åŒ–JDBCä»£ç </li><li>ç®€å•æ˜“å­¦</li><li>sqlä¸ä»£ç åˆ†ç¦»,æé«˜å¯ç»´æŠ¤æ€§</li></ul><p>æœ€å¥½çš„å­¦ä¹ è¿˜æ˜¯çœ‹å®˜æ–¹æ–‡æ¡£:<a href="https://mybatis.org/mybatis-3/zh/index.html">MyBatis</a></p><p><em>MyBatisçš„å®˜æ–¹æ–‡æ¡£ç›¸å¯¹æ¥è¯´æ¯”è¾ƒç®€å•ç‚¹ï¼Œè€Œä¸”æ”¯æŒä¸­æ–‡ç‰ˆ</em></p><blockquote><p>ç†è§£æ¦‚å¿µ:</p><p><strong>æŒä¹…åŒ–</strong>:å°†ç¨‹åºçš„æ•°æ®æŒä¹…çŠ¶æ€(ä¿å­˜åˆ°æ•°æ®åº“)å’Œç¬æ—¶çŠ¶æ€(æ–­ç”µå³å¤±)è½¬åŒ–çš„è¿‡ç¨‹</p><p><strong>æŒä¹…å±‚</strong>:å®ŒæˆæŒä¹…åŒ–å·¥ä½œçš„ä»£ç å—</p></blockquote><h2 id="å®ç°MyBatisæ­¥éª¤"><a href="#å®ç°MyBatisæ­¥éª¤" class="headerlink" title="å®ç°MyBatisæ­¥éª¤:"></a><strong>å®ç°MyBatisæ­¥éª¤:</strong></h2><p><strong>1ã€å¯¼å…¥MyBatis</strong></p><p>åœ¨Mavençš„pomæ–‡ä»¶ä¸­å¯¼å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.mybatis&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mybatis&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;3.5.2&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p><strong>2ã€é…ç½®å·¥å…·ç±»,ç”¨æ¥è·å–sqlSession</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBatisUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//è·å–sqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">            String resource = <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">            InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">            sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title">getSqlSession</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sqlSessionFactory.openSession(<span class="keyword">true</span>);<span class="comment">//trueåˆ™æ˜¯äº‹åŠ¡é»˜è®¤æäº¤ï¼Œåç»­sqlå¢åˆ æ”¹ä¸ç”¨æ‰‹åŠ¨å†™æäº¤äº†</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>3ã€åœ¨resourcesç›®å½•ä¸‹åˆ›å»ºå·¥å…·ç±»ä¸­çš„mybatisæ ¸å¿ƒé…ç½®.xmlæ–‡ä»¶</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ ¸å¿ƒé…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=false<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="symbol">&amp;amp;</span>serverTimezone=UTC&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  æ¯ä¸€ä¸ªxxxMapping.xmlæ–‡ä»¶éƒ½éœ€è¦åœ¨mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/mhy/dao/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¯ä»¥å¼•ç”¨å¤–éƒ¨æ–‡ä»¶</strong></p><p>åœ¨resourcesåŒ…ä¸‹æ–°å»ºä¸€ä¸ªdb.properties</p><p>æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼•å…¥:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--   å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶ --&gt;</span><br><span class="line">    &lt;properties resource=<span class="string">&quot;db.properties&quot;</span> /&gt;</span><br><span class="line">    ...</span><br><span class="line">    &lt;property name=<span class="string">&quot;driver&quot;</span> value=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span><br><span class="line">    &lt;property name=<span class="string">&quot;url&quot;</span> value=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><p><strong>èµ·åˆ«å</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç»™beanèµ·åˆ«å</span></span><br><span class="line">    &lt;typeAliases&gt;</span><br><span class="line">    <span class="comment">//ç¬¬ä¸€ç§</span></span><br><span class="line">        &lt;typeAlias type=<span class="string">&quot;com.mhy.pojo.User&quot;</span> alias=<span class="string">&quot;User&quot;</span> /&gt;</span><br><span class="line">    <span class="comment">//ç¬¬äºŒç§,æ‰«æåŒ…ä¸­æ‰€æœ‰çš„java Beanï¼Œä¼šä½¿ç”¨ Bean çš„é¦–å­—æ¯å°å†™çš„éé™å®šç±»åæ¥ä½œä¸ºå®ƒçš„åˆ«åã€‚</span></span><br><span class="line">    &lt;<span class="keyword">package</span> name=<span class="string">&quot;domain.blog&quot;</span>/&gt;</span><br><span class="line">    &lt;/typeAliases&gt;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ç¬¬ä¸‰ç§,åœ¨ç±»ä¸Šä½¿ç”¨æ³¨è§£ </span></span><br><span class="line">    <span class="meta">@Alias(&quot;author&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Author</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote><p><strong>4ã€ç¼–å†™DAOæ¥</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¤ºä¾‹:</span></span><br><span class="line"><span class="keyword">import</span> com.mhy.pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">getUserList</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>5ã€ç¼–å†™UserDaoå¯¹åº”çš„xxxMapping.xmlæ–‡ä»¶</strong></p><p><strong>ä¸ä¹‹å‰çš„å†™æ³•åŒºåˆ«:</strong></p><p>ä¹‹å‰ï¼šå†™å®Œæ¥å£ï¼Œå†™å¯¹ç”¨çš„æ¥å£å®ç°ç±».æ¯”å¦‚:UserDaoâ¡UserDaoImpl</p><p>ç°åœ¨ï¼šå†™å®Œæ¥å£ï¼Œç¼–å†™å¯¹åº”çš„xxx.xmlæ–‡ä»¶ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- namespace:ç»‘å®šä¸€ä¸ªå¯¹åº”çš„DAOæ¥å£ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.mhy.dao.UserDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- idè¡¨ç¤ºæ¥å£ä¸­çš„æ–¹æ³•,resultTypeè¡¨ç¤ºè¿”å›ç»“æœçš„ç±»å‹,å†™åˆ°å…·ä½“çš„ç±» --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.mhy.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.user;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>6ã€ç¼–å†™æµ‹è¯•ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//ç¬¬ä¸€æ­¥:è°ƒç”¨å·¥å…·ç±»,è·å¾—SqlSessionå¯¹è±¡</span></span><br><span class="line">        SqlSession sqlSession = MyBatisUtils.getSqlSession();</span><br><span class="line">        <span class="comment">//ç¬¬äºŒæ­¥:æ‰§è¡ŒSQL</span></span><br><span class="line">        UserDao mapper = sqlSession.getMapper(UserDao.class);</span><br><span class="line">        List&lt;User&gt; userList = mapper.getUserList();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (User user : userList)&#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å…³é—­èµ„æº</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="CRUD-å†…å«æ³¨è§£"><a href="#CRUD-å†…å«æ³¨è§£" class="headerlink" title="CRUD(å†…å«æ³¨è§£)"></a>CRUD(å†…å«æ³¨è§£)</h2><h3 id="ä½¿ç”¨xmlè¿›è¡ŒCRUD"><a href="#ä½¿ç”¨xmlè¿›è¡ŒCRUD" class="headerlink" title="ä½¿ç”¨xmlè¿›è¡ŒCRUD"></a>ä½¿ç”¨xmlè¿›è¡ŒCRUD</h3><p><strong>æ­¥éª¤ï¼š</strong></p><ul><li>å†™æ¥å£</li><li>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œxmlæ–‡ä»¶</li><li>å†™xmlæ–‡ä»¶ä¸­çš„sqlè¯­å¥</li><li>å†™æµ‹è¯•ç±»</li></ul><blockquote><p>æ³¨æ„ï¼š</p><p>å¢åˆ æ”¹æ“ä½œï¼Œå¿…é¡»æäº¤äº‹åŠ¡!!!å¦åˆ™sqlè¯­å¥æ— æ•ˆ.</p><p>åœ¨æµ‹è¯•ç±»ä¸­è®°å¾—æäº¤äº‹åŠ¡ sqlSession.commit();</p><p>å¦‚æœåœ¨å·¥å…·ç±»ä¸­sqlSessionFactory.openSession(true);ä¸ºtrueï¼Œåˆ™ä¸éœ€è¦åœ¨æ‰‹åŠ¨å†™æäº¤è¯­å¥ï¼ï¼ï¼</p></blockquote><p><strong>DAOæ¥å£</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">getUserList</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">    <span class="function">User <span class="title">getUserByID</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¢åŠ ç”¨æˆ·</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addUser</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¿®æ”¹ç”¨æˆ·</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">updateUser</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">deleteUser</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>xxxMapping.xml</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- namespace:ç»‘å®šä¸€ä¸ªå¯¹åº”çš„DAOæ¥å£ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.mhy.dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  æŸ¥è¯¢ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.mhy.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.user;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--  æŒ‰idæŸ¥è¯¢ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserByID&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>  <span class="attr">resultType</span>=<span class="string">&quot;com.mhy.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.user where id = #&#123;id&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--  æ·»åŠ   --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.mhy.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        insert into mybatis.user(id, name, pwd) values (#&#123;id&#125;,#&#123;name&#125;,#&#123;pwd&#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--  ä¿®æ”¹  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.mhy.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    update user</span><br><span class="line">    set name = #&#123;name&#125;,pwd = #&#123;pwd&#125;</span><br><span class="line">    where id = #&#123;id&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!--  åˆ é™¤  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.mhy.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    delete</span><br><span class="line">    from user</span><br><span class="line">    where id = #&#123;id&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æµ‹è¯•ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//ç¬¬ä¸€æ­¥:è·å¾—SqlSessionå¯¹è±¡</span></span><br><span class="line">        SqlSession sqlSession = MyBatisUtils.getSqlSession();</span><br><span class="line">        <span class="comment">//ç¬¬äºŒæ­¥:æ‰§è¡ŒSQL</span></span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        List&lt;User&gt; userList = mapper.getUserList();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (User user : userList)&#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        SqlSession sqlSession = MyBatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        User user = mapper.getUserByID(<span class="number">3</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç‰¹åˆ«æ³¨æ„éœ€è¦æäº¤äº‹åŠ¡ï¼Œå¦åˆ™æ’å…¥ä¸ä¼šæˆåŠŸ.å¢åˆ æ”¹éƒ½éœ€è¦æäº¤äº‹åŠ¡</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span></span>&#123;</span><br><span class="line">        SqlSession sqlSession = MyBatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="keyword">int</span> i = mapper.addUser(<span class="keyword">new</span> User(<span class="number">4</span>, <span class="string">&quot;ç‹äº”&quot;</span>, <span class="string">&quot;112233&quot;</span>));</span><br><span class="line">        <span class="keyword">if</span> (i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ’å…¥æ•°æ®æˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æäº¤äº‹åŠ¡</span></span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test04</span><span class="params">()</span></span>&#123;</span><br><span class="line">        SqlSession sqlSession = MyBatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="keyword">int</span> i = mapper.updateUser(<span class="keyword">new</span> User(<span class="number">1</span>, <span class="string">&quot;é©¬äº‘&quot;</span>, <span class="string">&quot;111222333&quot;</span>));</span><br><span class="line">        <span class="keyword">if</span> (i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ä¿®æ”¹æˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test05</span><span class="params">()</span></span>&#123;</span><br><span class="line">        SqlSession sqlSession = MyBatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="keyword">int</span> i = mapper.deleteUser(<span class="number">4</span>);</span><br><span class="line">        <span class="keyword">if</span> (i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;åˆ é™¤æˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æ³¨è§£è¿›è¡ŒCRUD"><a href="#ä½¿ç”¨æ³¨è§£è¿›è¡ŒCRUD" class="headerlink" title="ä½¿ç”¨æ³¨è§£è¿›è¡ŒCRUD"></a>ä½¿ç”¨æ³¨è§£è¿›è¡ŒCRUD</h3><blockquote><p>æ³¨è§£åªèƒ½è¿›è¡Œç®€å•çš„æ“ä½œï¼Œæ¯”å¦‚Beanå±æ€§ä¸æ•°æ®åº“å­—æ®µä¸åŒåå°±æ— æ³•è§£å†³ã€‚</p><p>å®é™…å¼€å‘ä¸­è¿˜æ˜¯æå€¡ä½¿ç”¨xmlé…ç½®æ–‡ä»¶æ¥å¼€å‘!!!</p></blockquote><ol><li>ç¼–å†™æ¥å£å’Œsql</li><li>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œæ¥å£</li><li>å†™æµ‹è¯•ç±»</li></ol><p><strong>æ¥å£å±‚</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥è¯¢æ‰€æœ‰çš„ç”¨æˆ·</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">getAllUser</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŒ‰ç…§idæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function">User <span class="title">selectById</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> <span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¢åŠ ä¸€ä¸ªç”¨æˆ·</span></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into user(id,name,pwd) values(#&#123;id&#125;,#&#123;name&#125;,#&#123;password&#125;)&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addUser</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¿®æ”¹ä¸€ä¸ªç”¨æˆ·</span></span><br><span class="line">    <span class="meta">@Update(&quot;update user set name = #&#123;name&#125;,pwd=#&#123;password&#125; where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">updateUser</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤ç”¨æˆ·</span></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from user where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">deleteUser</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> <span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ç»‘å®šæ¥å£</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.mapper.UserMapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æµ‹è¯•ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserMapperTest</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getAllUser</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        SqlSession sqlSession = MyBatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        List&lt;User&gt; allUser = mapper.getAllUser();</span><br><span class="line">        <span class="keyword">for</span> (User user : allUser)&#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        sqlSession.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectById</span><span class="params">()</span></span>&#123;</span><br><span class="line">        SqlSession sqlSession = MyBatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        User user = mapper.selectById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line"></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">        SqlSession sqlSession = MyBatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="keyword">int</span> i = mapper.addUser(<span class="keyword">new</span> User(<span class="number">5</span>, <span class="string">&quot;mhy&quot;</span>, <span class="string">&quot;88888888&quot;</span>));</span><br><span class="line">        <span class="keyword">if</span> (i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ·»åŠ æˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">        SqlSession sqlSession = MyBatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="keyword">int</span> i = mapper.updateUser(<span class="keyword">new</span> User(<span class="number">2</span>, <span class="string">&quot;æå˜‰è¯š&quot;</span>, <span class="string">&quot;888888&quot;</span>));</span><br><span class="line">        <span class="keyword">if</span> (i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ä¿®æ”¹æˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">        SqlSession sqlSession = MyBatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="keyword">int</span> i = mapper.deleteUser(<span class="number">5</span>);</span><br><span class="line">        <span class="keyword">if</span> (i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;åˆ é™¤æˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;User&gt; allUser = mapper.getAllUser();</span><br><span class="line">        <span class="keyword">for</span> (User user : allUser)&#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸‡èƒ½map"><a href="#ä¸‡èƒ½map" class="headerlink" title="ä¸‡èƒ½map"></a><strong>ä¸‡èƒ½map</strong></h2><p><em>å®é™…å¼€å‘ä¸­å¸¸ç”¨</em></p><p>ä½¿ç”¨åœºæ™¯ï¼šå½“è¡¨ä¸­çš„å­—æ®µè¿‡å¤šï¼Œä¼ ç»Ÿå†™æ³•éœ€è¦new ä¸€ä¸ªjavaBeanå¯¹è±¡ï¼Œå¹¶æŠŠå¯¹è±¡ä¸­çš„å±æ€§å…¨éƒ¨å†™å‡ºæ¥ï¼Œä½¿ç”¨mapå¯ä»¥ç®€åŒ–å†™æ³•ï¼Œåªéœ€è¦å†™å‡ºéœ€è¦çš„å±æ€§å³å¯ï¼Œä¸ç”¨æŠŠæ•°æ®åº“ä¸­çš„å­—æ®µæˆ–javabeanå¯¹è±¡å±æ€§å…¨éƒ¨å†™å‡ºæ¥.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¤ºä¾‹:</span></span><br><span class="line"><span class="comment">//æ¥å£ä¸­å‚æ•°ä¼ é€’Map</span></span><br><span class="line"><span class="function">User <span class="title">selectUser</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–å†™sqlè¯­å¥æ—¶ï¼Œå‚æ•°ç±»å‹ä¸ºMap</span></span><br><span class="line">&lt;select id=<span class="string">&quot;selectUser&quot;</span> parameterType=<span class="string">&quot;map&quot;</span> resultType=<span class="string">&quot;com.mhy.pojo.User&quot;</span>&gt;</span><br><span class="line">select * from user where name = #&#123;username&#125; and pwd = #&#123;pwd&#125; <span class="comment">//å‚æ•°åå¯ä»¥ä»»æ„èµ·å </span></span><br><span class="line">&lt;/select&gt;</span><br><span class="line">            </span><br><span class="line">    <span class="comment">//æµ‹è¯•ç±»</span></span><br><span class="line">            <span class="comment">//åˆ›å»ºMapå¯¹è±¡</span></span><br><span class="line">            Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line"><span class="comment">//å‚æ•°åå¿…é¡»ä¸sqlè¯­å¥ä¸­çš„å‚æ•°åç›¸åŒ</span></span><br><span class="line">map.put(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;å°æ˜&quot;</span>);</span><br><span class="line">map.put(<span class="string">&quot;pwd&quot;</span>,<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">User user = mapper.selectUser(map);</span><br></pre></td></tr></table></figure><p>â€‹    <strong>æ¨¡ç³ŠæŸ¥è¯¢</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¤ºä¾‹:</span></span><br><span class="line"><span class="comment">//æ¥å£å±‚</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">getUserLike</span><span class="params">(String value)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//sqlå±‚</span></span><br><span class="line">&lt;select id=<span class="string">&quot;getUserLike&quot;</span> resultType=<span class="string">&quot;com.mhy.pojo.User&quot;</span>&gt;</span><br><span class="line">    select *</span><br><span class="line">   from user</span><br><span class="line">    where name like #&#123;name&#125;;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line">         </span><br><span class="line">     <span class="comment">//æµ‹è¯•å±‚</span></span><br><span class="line">            List&lt;User&gt; userLike = mapper.getUserLike(<span class="string">&quot;%æ%&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="æ˜ å°„å™¨éœ€è¦æ³¨æ„çš„é—®é¢˜"><a href="#æ˜ å°„å™¨éœ€è¦æ³¨æ„çš„é—®é¢˜" class="headerlink" title="æ˜ å°„å™¨éœ€è¦æ³¨æ„çš„é—®é¢˜"></a>æ˜ å°„å™¨éœ€è¦æ³¨æ„çš„é—®é¢˜</h2><p>å®˜æ–¹ç»™å‡ºçš„å‡ ç§æ³¨å†Œç¤ºä¾‹:</p><p><strong>æ¨èä½¿ç”¨è¿™ç§</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ¨èä½¿ç”¨è¿™ç§ï¼Œå†™ä¸€ä¸ªæ¥å£,å°±å†™ä¸€ä¸ªå¯¹ç”¨çš„Mapper.xmlæ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/builder/AuthorMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸æ¨èä½¿ç”¨è¿™ç§(åˆ«ç”¨å°±å¯¹äº†):</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨å®Œå…¨é™å®šèµ„æºå®šä½ç¬¦ï¼ˆURLï¼‰ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">url</span>=<span class="string">&quot;file:///var/mappers/AuthorMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ä¸¤ç§ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼ˆé—®é¢˜å°±ä¸å†ä¸¾ä¾‹ï¼Œ åªè¯´è§£å†³æ–¹æ³•ï¼‰ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨æ˜ å°„å™¨æ¥å£å®ç°ç±»çš„å®Œå…¨é™å®šç±»å --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.builder.AuthorMapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å°†åŒ…å†…çš„æ˜ å°„å™¨æ¥å£å®ç°å…¨éƒ¨æ³¨å†Œä¸ºæ˜ å°„å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;org.mybatis.builder&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•:</p><ul><li>æ¥å£å¿…é¡»å’Œå¯¹åº”çš„Mapper.xmlæ–‡ä»¶åŒå.æ¯”å¦‚ï¼šUserMapper.java,UserMapper.xml</li><li>æ¥å£å¿…é¡»å’Œå¯¹åº”çš„Mapper.xmlæ–‡ä»¶åœ¨åŒä¸€åŒ…ä¸‹ ã€‚</li></ul><h2 id="ResultMap"><a href="#ResultMap" class="headerlink" title="ResultMap"></a>ResultMap</h2><h3 id="è§£å†³æ•°æ®åº“å­—æ®µä¸å±æ€§åä¸åŒé—®é¢˜"><a href="#è§£å†³æ•°æ®åº“å­—æ®µä¸å±æ€§åä¸åŒé—®é¢˜" class="headerlink" title="è§£å†³æ•°æ®åº“å­—æ®µä¸å±æ€§åä¸åŒé—®é¢˜"></a>è§£å†³æ•°æ®åº“å­—æ®µä¸å±æ€§åä¸åŒé—®é¢˜</h3><p>äº§ç”Ÿçš„é—®é¢˜:</p><blockquote><p>id  name  pwd                   æ•°æ®åº“ä¸­çš„å­—æ®µ</p><p>id  name  password         Beanä¸­çš„å±æ€§</p><p>æ‰§è¡Œsqlè¯­å¥ä»æ•°æ®åº“ä¸­å–å‡ºå€¼ï¼Œç”±äºpwdå’Œpasswordå‘½åä¸åŒï¼Œå¯¼è‡´pwdçš„å€¼ä¸èƒ½æ˜ å°„åˆ°passwordä¸Šï¼Œpasswordè¾“å‡ºçš„å€¼ä¸ºç©º</p></blockquote><p>è§£å†³åŠæ³•:</p><ol><li><p>ç¼–å†™sqlè¯­å¥æ—¶èµ·åˆ«å.pwd as password</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">  select id , name , pwd as password from user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ç»“æœé›†æ˜ å°„(ResultMa)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;UserMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- idä¸ºä¸»é”® --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- columnæ˜¯æ•°æ®åº“è¡¨çš„åˆ—å , propertyæ˜¯å¯¹åº”å®ä½“ç±»çš„å±æ€§å --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUserById&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;UserMap&quot;</span>&gt;</span></span><br><span class="line">  select id , name , pwd from user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="æ—¥å¿—"><a href="#æ—¥å¿—" class="headerlink" title="æ—¥å¿—"></a>æ—¥å¿—</h2><h3 id="STDOUT-LOGGING"><a href="#STDOUT-LOGGING" class="headerlink" title="STDOUT_LOGGING"></a>STDOUT_LOGGING</h3><p>æ ‡å‡†æ—¥å¿—å·¥å‚å®ç°</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--  åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œconfigurationä¸‹åŠ å…¥æ­¤é…ç½®  --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  æ ‡å‡†æ—¥å¿—å·¥å‚å®ç°  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ§åˆ¶å°æ‰“å°ç»“æœ --&gt;</span></span><br><span class="line">Logging initialized using &#x27;class org.apache.ibatis.logging.stdout.StdOutImpl&#x27; adapter.</span><br><span class="line">PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">Opening JDBC Connection</span><br><span class="line">Created connection 1943325854.</span><br><span class="line">Setting autocommit to false on JDBC Connection [com.mysql.jdbc.JDBC4Connection@73d4cc9e]</span><br><span class="line">==&gt;  Preparing: select * from user where id = 1; </span><br><span class="line">==&gt; Parameters: </span><br><span class="line">&lt;==    Columns: id, name, pwd</span><br><span class="line">&lt;==        Row: 1, é©¬äº‘, 111222333</span><br><span class="line">&lt;==      Total: 1</span><br><span class="line">User&#123;id=1, name=&#x27;é©¬äº‘&#x27;, password=&#x27;111222333&#x27;&#125;</span><br></pre></td></tr></table></figure><h3 id="LOG4J"><a href="#LOG4J" class="headerlink" title="LOG4J"></a>LOG4J</h3><p>å¯ä»¥å°†ä¿¡æ¯è¾“å‡ºåˆ°æ§åˆ¶å°ã€æ–‡ä»¶ã€GUIç»„ä»¶ã€æœåŠ¡å™¨ç­‰.</p><p>1ã€å¯¼å…¥LOG4Jä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2ã€åˆ›å»ºlog4j propertiesé…ç½®æ–‡ä»¶</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å°†ç­‰çº§ä¸ºDEBUGçš„æ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°consoleå’Œfileè¿™ä¸¤ä¸ªç›®çš„åœ°ï¼Œconsoleå’Œfileçš„å®šä¹‰åœ¨ä¸‹é¢çš„ä»£ç </span></span><br><span class="line"><span class="meta">log4j.rootLogger</span>=<span class="string">DEBUG,console,file</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#æ§åˆ¶å°è¾“å‡ºçš„ç›¸å…³è®¾ç½®</span></span><br><span class="line"><span class="meta">log4j.appender.console</span> = <span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="meta">log4j.appender.console.Target</span> = <span class="string">System.out</span></span><br><span class="line"><span class="meta">log4j.appender.console.Threshold</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.appender.console.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.console.layout.ConversionPattern</span>=<span class="string">[%c]-%m%n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#æ–‡ä»¶è¾“å‡ºçš„ç›¸å…³è®¾ç½®</span></span><br><span class="line"><span class="meta">log4j.appender.file</span> = <span class="string">org.apache.log4j.RollingFileAppender</span></span><br><span class="line"><span class="meta">log4j.appender.file.File</span>=<span class="string">./log/kuang.log</span></span><br><span class="line"><span class="meta">log4j.appender.file.MaxFileSize</span>=<span class="string">10mb</span></span><br><span class="line"><span class="meta">log4j.appender.file.Threshold</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.appender.file.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.file.layout.ConversionPattern</span>=<span class="string">[%p][%d&#123;yy-MM-dd&#125;][%c]%m%n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#æ—¥å¿—è¾“å‡ºçº§åˆ«</span></span><br><span class="line"><span class="meta">log4j.logger.org.mybatis</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.logger.java.sql</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.logger.java.sql.Statement</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.logger.java.sql.ResultSet</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.logger.java.sql.PreparedStatement</span>=<span class="string">DEBUG</span></span><br></pre></td></tr></table></figure><p>3ã€åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼•å…¥log4jé…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;LOG4J&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure><p>4ã€ç¼–å†™æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ³¨æ„ä¸€å®šè¦å¯¼å…¥apacheçš„åŒ…</span></span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">static</span> Logger logger = Logger.getLogger(UserDaoTest.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        SqlSession sqlSession = MyBatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        User user = mapper.selectById(<span class="number">1</span>);</span><br><span class="line">        logger.info(user);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç”Ÿæˆçš„æ—¥å¿—æ–‡ä»¶</span></span><br><span class="line">[INFO][<span class="number">21</span>-<span class="number">07</span>-<span class="number">24</span>][com.mhy.dao.UserDaoTest]User&#123;id=<span class="number">1</span>, name=<span class="string">&#x27;é©¬äº‘&#x27;</span>, password=<span class="string">&#x27;111222333&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">    <span class="comment">//å‡ ç§çº§åˆ«</span></span><br><span class="line">            logger.debug();</span><br><span class="line">logger.info();</span><br><span class="line">logger.error();</span><br></pre></td></tr></table></figure><h2 id="å¤šå¯¹ä¸€å…³ç³»å¤„ç†"><a href="#å¤šå¯¹ä¸€å…³ç³»å¤„ç†" class="headerlink" title="å¤šå¯¹ä¸€å…³ç³»å¤„ç†"></a>å¤šå¯¹ä¸€å…³ç³»å¤„ç†</h2><p>åœºæ™¯:æŸ¥è¯¢æ‰€æœ‰çš„å­¦ç”Ÿï¼ŒåŒ…æ‹¬å¯¹åº”çš„è¾…å¯¼å‘˜</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç»“æœé›†æ˜ å°„ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudent&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;getTeacher&quot;</span>&gt;</span></span><br><span class="line">        select s.id sid,s.name sname, t.name tname,t.id tid</span><br><span class="line">        from student s,teacher t</span><br><span class="line">        where s.tid = t.id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tname&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ç¬¬äºŒç§å†™æ³• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudent&quot;</span>  <span class="attr">resultMap</span>=<span class="string">&quot;getTeacher&quot;</span>&gt;</span></span><br><span class="line">        select *</span><br><span class="line">        from student</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Teacher&quot;</span> <span class="attr">select</span>=<span class="string">&quot;teacher&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;teacher&quot;</span>&gt;</span></span><br><span class="line">        select *</span><br><span class="line">        from teacher</span><br><span class="line">        where id = #&#123;tid&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ä¸€å¯¹å¤šå…³ç³»å¤„ç†"><a href="#ä¸€å¯¹å¤šå…³ç³»å¤„ç†" class="headerlink" title="ä¸€å¯¹å¤šå…³ç³»å¤„ç†"></a>ä¸€å¯¹å¤šå…³ç³»å¤„ç†</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;getStudent&quot;</span>&gt;</span></span><br><span class="line">        select t.name tname,s.name sname</span><br><span class="line">        from teacher t ,student s</span><br><span class="line">        where t.id = s.tid and t.id = #&#123;tid&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;getStudent&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tname&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;students&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong></p><blockquote><p>ä¸€å¯¹å¤šå’Œå¤šå¯¹ä¸€åŒºåˆ«åœ¨äº:</p><p>association ç”¨äºå¤šå¯¹ä¸€</p><p>collection ç”¨äºä¸€å¯¹å¤š</p><p>å…·ä½“ä½¿ç”¨æ–¹æ³•ä»”ç»†è§‚å¯Ÿä»¥ä¸Šä¸Šé¢ä»£ç </p></blockquote><h2 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h2><h3 id="ä¸€çº§ç¼“å­˜"><a href="#ä¸€çº§ç¼“å­˜" class="headerlink" title="ä¸€çº§ç¼“å­˜"></a>ä¸€çº§ç¼“å­˜</h3><p>å®šä¹‰:å°†ç»“æœä¿å­˜æš‚æ—¶åˆ°å†…å­˜ä¸­ï¼Œè§£å†³ä¸€äº›å¹¶å‘é—®é¢˜</p><p>MyBatisä¸­æœ‰ä¸¤ç§ç¼“å­˜:<strong>ä¸€çº§ç¼“å­˜ã€äºŒçº§ç¼“å­˜</strong></p><p>**ä¸€çº§ç¼“å­˜(æœ¬åœ°ç¼“å­˜)**æ˜¯é»˜è®¤å¼€å¯ï¼Œåªå­˜åœ¨äºä¸€ä¸ªsqlsessionä¸­ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SqlSession sqlSession = MyBatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        User user01 = mapper.getUserById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(user01);</span><br><span class="line">        System.out.println(<span class="string">&quot;======================&quot;</span>);</span><br><span class="line">        User user02 = mapper.getUserById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(user01==user02);<span class="comment">//ç»“æœä¸ºtrue</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line"><span class="comment">//è¿è¡Œç»“æœåªä¼šè¿è¡Œä¸€æ¡sqlè¯­å¥</span></span><br></pre></td></tr></table></figure><p><strong>å¦‚æœåœ¨sqlsessionä¸­å­˜åœ¨å¢åˆ æ”¹æ“ä½œï¼Œé‚£ä¹ˆç¼“å­˜å°±ä¼šåˆ·æ–°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SqlSession sqlSession = MyBatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        User user01 = mapper.getUserById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(user01);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ›´æ–°ä¸€æ¡è®°å½•</span></span><br><span class="line">        <span class="keyword">int</span> updateUser = mapper.updateUserById(<span class="keyword">new</span> User(<span class="number">3</span>, <span class="string">&quot;mhy&quot;</span>, <span class="string">&quot;888888&quot;</span>));</span><br><span class="line"></span><br><span class="line">        User user02 = mapper.getUserById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(user01==user02);<span class="comment">//ç»“æœä¸ºfalse</span></span><br><span class="line">        sqlSession.close();</span><br></pre></td></tr></table></figure><h3 id="äºŒçº§ç¼“å­˜"><a href="#äºŒçº§ç¼“å­˜" class="headerlink" title="äºŒçº§ç¼“å­˜"></a>äºŒçº§ç¼“å­˜</h3><p><strong>äºŒçº§ç¼“å­˜(å…¨å±€ç¼“å­˜)</strong></p><p>ä¼šå°†ä¸€çº§ç¼“å­˜ä¸­çš„å…³é—­æ‰çš„æ•°æ®ä¿å­˜åˆ°äºŒçº§ç¼“å­˜ä¸­ã€‚æ–°çš„ä¼šè¯å¯ä»¥ä»äºŒçº§ç¼“å­˜ä¸­è¯»å–æ•°æ®ã€‚åªæœ‰ä¸€çº§ç¼“å­˜ç»“æŸåï¼Œæ‰ä¼šç”ŸæˆäºŒçº§ç¼“å­˜</p><ul><li><p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶.xmlä¸­è®¾ç½®å¼€å¯äºŒçº§ç¼“å­˜</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨XXXmapper.xmlä¸­åŠ å…¥,å³å¯</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>å¯¹äºç¼“å­˜çš„ä¸€äº›æ¸…é™¤ç­–ç•¥ï¼Œå’Œé…ç½®ï¼Œè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£<a href="https://mybatis.org/mybatis-3/zh/index.html">MyBatis</a></p></li></ul><blockquote><p>æ‰§è¡ŒåŸç†ï¼š</p><p>ç”¨æˆ·å‘èµ·è¯·æ±‚ï¼Œé¦–å…ˆä¼šä»äºŒçº§ç¼“å­˜ä¸­æŸ¥æ‰¾æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™å»ä¸€çº§ç¼“å­˜ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœä¸€çº§ç¼“å­˜ä¹Ÿæ²¡æœ‰ï¼Œæœ€åæ‰ä¼šå»æ•°æ®åº“ä¸­æŸ¥æ‰¾ã€‚</p></blockquote><h2 id="æ–‡ç« æ›´æ–°æ—¥å¿—"><a href="#æ–‡ç« æ›´æ–°æ—¥å¿—" class="headerlink" title="æ–‡ç« æ›´æ–°æ—¥å¿—:"></a>æ–‡ç« æ›´æ–°æ—¥å¿—:</h2><blockquote><p>æ›´æ–°æ—¥æœŸï¼š2021-07-28</p><p>æ›´æ–°å†…å®¹ï¼š</p><ul><li>åœ¨æ–‡ç« **å®ç°MyBatisæ­¥éª¤:**ä¸­åŠ å…¥äº†ç¬¬ä¸€æ­¥å¯¼å…¥MyBatisåŒ…</li></ul></blockquote><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li><a href="https://mybatis.org/mybatis-3/zh/index.html">mybatis</a></li><li><a href="https://www.bilibili.com/video/BV1NE411Q7Nx?t=76&p=31">ã€ç‹‚ç¥è¯´Javaã€‘Mybatisæœ€æ–°å®Œæ•´æ•™ç¨‹IDEAç‰ˆé€šä¿—æ˜“æ‡‚</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> MyBatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SSM </tag>
            
            <tag> Java </tag>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringMVC</title>
      <link href="/2021/07/06/SpringMVC/"/>
      <url>/2021/07/06/SpringMVC/</url>
      
        <content type="html"><![CDATA[<p>SpringMVC = Spring+M V Cï¼Œæ²¡æ¯›ç—…å§ï¼Œå“ˆå“ˆğŸµ</p><span id="more"></span><p><strong>M</strong>:Modelæ¨¡å‹ (java Bean)</p><p><strong>V</strong>: Viewè§†å›¾ (.jsp)</p><p><strong>C</strong>: Controlleræ§åˆ¶å™¨ (Servlet)</p><p><strong>SpringMVCæ€æƒ³å°±æ˜¯æœ‰ä¸€ä¸ªå‰ç«¯æ§åˆ¶å™¨èƒ½æ‹¦æˆªæ‰€æœ‰è¯·æ±‚ï¼Œå¹¶æ™ºèƒ½æ´¾å‘.</strong></p><h4 id="SpringMVCæ‰§è¡ŒåŸç†-ï¼šé‡ç‚¹"><a href="#SpringMVCæ‰§è¡ŒåŸç†-ï¼šé‡ç‚¹" class="headerlink" title="SpringMVCæ‰§è¡ŒåŸç† ï¼šé‡ç‚¹"></a><strong>SpringMVCæ‰§è¡ŒåŸç† ï¼š</strong>é‡ç‚¹</h4><blockquote><p>æ‰§è¡Œæµç¨‹è¿™é‡Œå†™çš„ä¸å…¨ï¼Œå¾ˆä¹±ï¼Œå…·ä½“å‚è€ƒå…¶ä»–æŠ€æœ¯æ–‡ç« </p></blockquote><ol><li>ç”¨æˆ·å‘èµ·è¯·æ±‚</li><li>å‰ç«¯æ§åˆ¶å™¨ï¼ˆDispatcherServletï¼‰æ‹¦æˆªè¯·æ±‚</li><li>è§£æè¯·æ±‚ï¼Œå¹¶æŸ¥æ‰¾å…·ä½“çš„Controller</li><li>Controllerå¤„ç†ä¸šåŠ¡ï¼Œè¿”å›è§†å›¾</li></ol><h4 id="web-xmlè¿›è¡Œé…ç½®"><a href="#web-xmlè¿›è¡Œé…ç½®" class="headerlink" title="web.xmlè¿›è¡Œé…ç½®:"></a>web.xmlè¿›è¡Œé…ç½®:</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springDispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--åˆå§‹åŒ–springmvcæ–‡ä»¶çš„ä½ç½®,å¦‚æœä¸è¿›è¡Œåˆå§‹åŒ–ï¼Œé»˜è®¤åœ¨WEB-INFæ–‡ä»¶ä¸‹æŸ¥æ‰¾æ–‡ä»¶,æ–‡ä»¶å‘½åæ ¼å¼ä¸ºxxx-servlet.xml--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--contextConfigLocation:æŒ‡å®šspringmvcæ–‡ä»¶ä½ç½®--&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--classpath:æ˜¯æŒ‡ä»srcç›®å½•ä¸‹æŸ¥æ‰¾--&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springDispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- // /ï¼šä¼šåŒ¹é…jspé¡µé¢ï¼Œ/*æ‹¦æˆªjspé¡µé¢ï¼Œä¼šæŠ¥é”™ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="springmvc-servlet-xmlé…ç½®"><a href="#springmvc-servlet-xmlé…ç½®" class="headerlink" title="springmvc_servlet.xmlé…ç½®"></a>springmvc_servlet.xmlé…ç½®</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       https://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="string"><span class="tag">       https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªåŠ¨æ‰«æåŒ…ï¼Œè®©æŒ‡å®šåŒ…ä¸‹çš„æ³¨è§£ç”Ÿæ•ˆ,ç”±IOCå®¹å™¨ç»Ÿä¸€ç®¡ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.mhy&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®©Spring MVCä¸å¤„ç†é™æ€èµ„æº  æ¯”å¦‚: .css  .js  .htmlç­‰--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    æ”¯æŒmvcæ³¨è§£é©±åŠ¨</span></span><br><span class="line"><span class="comment">        åœ¨springä¸­ä¸€èˆ¬é‡‡ç”¨@RequestMappingæ³¨è§£æ¥å®Œæˆæ˜ å°„å…³ç³»</span></span><br><span class="line"><span class="comment">        è¦æƒ³ä½¿@RequestMappingæ³¨è§£ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="comment">        å¿…é¡»å‘ä¸Šä¸‹æ–‡ä¸­æ³¨å†ŒDefaultAnnotationHandlerMapping</span></span><br><span class="line"><span class="comment">        å’Œä¸€ä¸ªAnnotationMethodHandlerAdapterå®ä¾‹</span></span><br><span class="line"><span class="comment">        è¿™ä¸¤ä¸ªå®ä¾‹åˆ†åˆ«åœ¨ç±»çº§åˆ«å’Œæ–¹æ³•çº§åˆ«å¤„ç†ã€‚</span></span><br><span class="line"><span class="comment">        è€Œannotation-drivené…ç½®å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨å®Œæˆä¸Šè¿°ä¸¤ä¸ªå®ä¾‹çš„æ³¨å…¥ã€‚</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span>//å®é™…å¼€å‘ä¸­å¯çœç•¥</span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">id</span>=<span class="string">&quot;internalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å‰ç¼€ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åç¼€ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ¥æ”¶å‰ç«¯è¯·æ±‚çš„æ•°æ®"><a href="#æ¥æ”¶å‰ç«¯è¯·æ±‚çš„æ•°æ®" class="headerlink" title="æ¥æ”¶å‰ç«¯è¯·æ±‚çš„æ•°æ®"></a>æ¥æ”¶å‰ç«¯è¯·æ±‚çš„æ•°æ®</h4><p>@RequestParamæ¥å—å‰ç«¯æ•°æ®.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(...)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">(<span class="meta">@RequestParam(&quot;username&quot;)</span>String name)</span></span>&#123;</span><br><span class="line">    sout(<span class="string">&quot;ä»å‰ç«¯æ¥å—çš„æ•°æ®ï¼š&quot;</span>+name);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Controllerä¸­å‡ ç§æ³¨è§£"><a href="#Controllerä¸­å‡ ç§æ³¨è§£" class="headerlink" title="Controllerä¸­å‡ ç§æ³¨è§£"></a><strong>Controllerä¸­å‡ ç§æ³¨è§£</strong></h4><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@RequestParam</span><br><span class="line">@RequestHeader</span><br><span class="line">@CookieValue</span><br><span class="line">æ¯ä¸ªæ³¨è§£ä¸­éƒ½åŒ…å«ä¸‰ä¸ªå‚æ•°:value(è¦æŸ¥æ‰¾çš„å‚æ•°å€¼),required(åˆ¤æ–­æ˜¯å¦å­˜åœ¨),defaultValue(è®¾ç½®é»˜è®¤å€¼)</span><br><span class="line">    </span><br><span class="line">    åŒºåˆ«@PathVariableã€@RequestParam:</span><br><span class="line">@PathVariableç”¨æ¥è·å–@RequestMapping(value = &quot;/book/&#123;bid&#125;&quot;)ä¸­&#123;bid&#125;çš„å‚æ•°</span><br><span class="line">@RequestParamç”¨æ¥è·å–@RequestMapping(value = &quot;/book&quot;)è¡¨å•ä¸­çš„å‚æ•°</span><br></pre></td></tr></table></figure><h4 id="è‡ªåŠ¨å°è£…"><a href="#è‡ªåŠ¨å°è£…" class="headerlink" title="è‡ªåŠ¨å°è£…"></a><strong>è‡ªåŠ¨å°è£…</strong></h4><p>åº”ç”¨åœºæ™¯:ä¸€ä¸ªè¡¨å•ä¸­æœ‰å¤šä¸ªå‚æ•°ï¼Œ åœ¨Controllerçš„æ–¹æ³•ä¸­éœ€è¦ä¸€ä¸€å¯¹åº”å†™å‡ºè·å–çš„æ¯ä¸ªå‚æ•°ï¼Œè´¹æ—¶è´¹åŠ›ã€‚</p><p>è§£å†³åŠæ³•:å…ˆå†™å‡ºæ¥ä¸€ä¸ªpojoå¯¹è±¡ï¼Œç„¶ååœ¨Controlleræ–¹æ³•å½¢å‚ä¸­ä¼ å…¥pojoå¯¹è±¡å³å¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">é¡µé¢ :</span><br><span class="line">    &lt;form action=<span class="string">&quot;info&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        <span class="comment">//inputä¾¿ç­¾ä¸­çš„nameå±æ€§ï¼Œè¦ä¸Bä¸­çš„å‚æ•°åä¿æŒä¸€è‡´</span></span><br><span class="line">        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;æäº¤&quot;</span>&gt;</span><br><span class="line">      &lt;/form&gt;</span><br><span class="line">Bean :</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    getã€setã€toStringã€æœ‰ã€æ— å‚æ„é€ å™¨æ­¤å¤„çœç•¥</span><br><span class="line">Controller :</span><br><span class="line">    <span class="comment">//è·å–è¡¨å•ä¸­çš„ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/info&quot;)</span></span><br><span class="line">        <span class="comment">//å½¢å‚ä¼ å…¥å¯¹åº”pojoå¯¹è±¡å³å¯å®Œæˆè‡ªåŠ¨å°è£…</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getParam</span><span class="params">(Person person)</span></span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è‡ªåŠ¨å°è£…&quot;</span>+person);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;/WEB-INF/pages/success.jsp&quot;</span>;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h4 id="æ•°æ®è¾“å‡ºåˆ°é¡µé¢"><a href="#æ•°æ®è¾“å‡ºåˆ°é¡µé¢" class="headerlink" title="æ•°æ®è¾“å‡ºåˆ°é¡µé¢"></a><strong>æ•°æ®è¾“å‡ºåˆ°é¡µé¢</strong></h4><p><strong>æ–¹æ³•å½¢å‚ä¸­ä¼ å…¥Mapã€Modelã€ModelMap</strong></p><p>æ•°æ®é»˜è®¤ä¿å­˜åœ¨<strong>Request</strong>åŸŸä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»£ç ç¤ºä¾‹:</span></span><br><span class="line"><span class="meta">@RequestMapping(...)</span></span><br><span class="line"><span class="comment">//ä½¿ç”¨Map</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>&#123;</span><br><span class="line">    map.put(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(...)</span></span><br><span class="line"><span class="comment">//ä½¿ç”¨Model</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(...)</span></span><br><span class="line"><span class="comment">//ä½¿ç”¨ModelMap</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">(ModelMap modelmap)</span></span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç•Œé¢ä¸­è°ƒç”¨RequeståŸŸ</span></span><br><span class="line">$&#123;RequestScop.msg&#125;;</span><br></pre></td></tr></table></figure><h4 id="æŠŠæ•°æ®æ”¾ç½®åœ¨SessionåŸŸä¸­"><a href="#æŠŠæ•°æ®æ”¾ç½®åœ¨SessionåŸŸä¸­" class="headerlink" title="æŠŠæ•°æ®æ”¾ç½®åœ¨SessionåŸŸä¸­"></a><strong>æŠŠæ•°æ®æ”¾ç½®åœ¨SessionåŸŸä¸­</strong></h4><p>ä½¿ç”¨@SessionAttributes,è¯¥æ³¨è§£æ ‡æ˜åœ¨ç±»ä¸Š!!!</p><p>@SessionAttributesæœ‰ä¸¤ç§å±æ€§:value()ç”¨æ¥ä¼ Stringç±»å‹çš„æ•°æ®ã€types()ç”¨æ¥ä¼ classç±»å‹çš„æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¤ºä¾‹:</span></span><br><span class="line"><span class="meta">@SessionAttributes(value=&quot;msg&quot;)</span><span class="comment">//æŠŠmsgçš„æ•°æ®ä¿å­˜åˆ°RequeståŸŸçš„åŒæ—¶ä¼šåŒæ—¶ä¿å­˜åˆ°SessionåŸŸä¸­,ç•Œé¢ä½¿ç”¨$&#123;SessionScop.msg&#125;è°ƒç”¨</span></span><br><span class="line"><span class="comment">//å¤šç§å±æ€§å€¼å†™æ³•</span></span><br><span class="line"><span class="comment">//@SessionAttributes(value=&#123;&quot;msg&quot;,&quot;haha&quot;&#125;)//è¡¨ç¤ºåŒæ—¶å°†msgå’Œhahaçš„å€¼ä¿å­˜åˆ°SessionåŸŸä¸­</span></span><br><span class="line"><span class="comment">//@SessionAttributes(value=&#123;&quot;msg&quot;&#125;,types=&#123;String.class&#125;)//è¡¨ç¤ºåªè¦æ˜¯Stringç±»å‹çš„æ•°æ®ï¼Œéƒ½ä¿å­˜åˆ°SessionåŸŸä¸­</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> class <span class="title">OutputController</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(...)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>&#123;</span><br><span class="line">    map.put(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="@RequestMapping"></a>@RequestMapping</h4><p>@RequestMappingå¯ä»¥æ”¾åœ¨ç±»ä¸Šï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨æ–¹æ³•ä¸Šã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ”¾åœ¨ç±»ä¸Šè¡¨ç¤ºé¦–å…ˆè¦è®¿é—®ç±»ä¸­@RequestMapping(&quot;/hi&quot;)ä¸­çš„åœ°å€ï¼Œç„¶åæ‰èƒ½è®¿é—®æ–¹æ³•ä¸­@RequestMapping(&quot;/hello&quot;)ä¸­çš„åœ°å€</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/hi&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> class <span class="title">HiController</span><span class="params">()</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ...</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸€èˆ¬å†™æ­»,åœ¨æ–¹æ³•ä¸­å†™ä¸Šçˆ¶ç±»åœ°å€</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/hi/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ...</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="ModelAttributer"><a href="#ModelAttributer" class="headerlink" title="@ModelAttributer"></a>@<strong>ModelAttributer</strong></h4><p>ä½¿ç”¨åœºæ™¯:ä»é¡µé¢è·å–è¦ä¿®æ”¹çš„æ•°æ®(ä¾‹å¦‚ä¿®æ”¹å›¾ä¹¦ä¿¡æ¯)ï¼Œç„¶åè°ƒç”¨DAOä¸­çš„sqlï¼Œå¦‚æœç•Œé¢ä¸­æœ‰æŸä¸€å¤„ä¸æƒ³ä¿®æ”¹ï¼Œé‚£ä¹ˆsqlè¯­å¥ä¸­çš„å€¼å¯èƒ½ä¼šè·å–ä¸ºç©º,æœ€ç»ˆä¿®æ”¹åæ•°æ®åº“ä¸­çš„å…¶ä»–æ•°æ®å…¨éƒ¨ä¸ºç©ºã€‚</p><p>åŸç†ï¼šModelAttributeræå‰äºç›®æ ‡æ–¹æ³•è¿è¡Œï¼Œå¯ä»¥å…ˆè°ƒç”¨æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œç„¶åå°è£…ä¸ºä¸€ä¸ªbeanå¯¹è±¡ï¼Œè¿™ä¸ªbeanå¯¹è±¡ç»™å…¶ä»–æ–¹æ³•æä¾›ä½¿ç”¨ã€‚ä»é¡µé¢è·å–è¦ä¿®æ”¹çš„æ•°æ®è¦†ç›–ModelAttributerå·²ç»å°è£…å¥½çš„beanå¯¹è±¡é‡Œé¢çš„æ•°æ®ï¼Œæ²¡æœ‰è·å–åˆ°çš„æ•°æ®é»˜è®¤è¿˜æ˜¯ä½¿ç”¨beanå¯¹è±¡ä»æ•°æ®åº“ä¸­è·å–çš„æºæ•°æ®ï¼Œä»è€Œè¾¾åˆ°åªä¿®æ”¹éƒ¨åˆ†æ•°æ®æ•ˆæœã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¤ºä¾‹ï¼š</span></span><br><span class="line"><span class="meta">@ModelAttribute</span><span class="comment">//åŠ äº†@ModelAttributeä¼šé¦–å…ˆæ‰§è¡Œè¯¥æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>&#123;</span><br><span class="line">    Book book = <span class="keyword">new</span> Book();</span><br><span class="line">    .....<span class="comment">//ä»æ•°æ®åº“è·å–æ•°æ®</span></span><br><span class="line">     map.put(<span class="string">&quot;book&quot;</span>,book);<span class="comment">//ä¿å­˜è·å–åˆ°çš„ä¿¡æ¯ï¼Œæ–¹ä¾¿ä¸‹ä¸€ä¸ªæ–¹æ³•ä½¿ç”¨</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(...)</span></span><br><span class="line"><span class="comment">//åœ¨å½¢å‚ä¸­åŠ å…¥@ModelAttribute(...),å‘Šè¯‰è¯¥æ–¹æ³•ä¸è¦å»å°è£…æ–°å¯¹è±¡ï¼Œå»è°ƒç”¨()ä¸­çš„å·²ç»å°è£…å¥½çš„beanå¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">(<span class="meta">@ModelAttribute(&quot;book&quot;)</span>Book book)</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="é¡µé¢è·³è½¬"><a href="#é¡µé¢è·³è½¬" class="headerlink" title="é¡µé¢è·³è½¬"></a>é¡µé¢è·³è½¬</h4><p>åŸå§‹çš„æ–¹æ³•:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(...)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ......</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;success.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æºå¸¦ç•Œé¢è¿”å›å€¼çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(...)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ......</span><br><span class="line">       ModelAndView mv =<span class="keyword">new</span> ModelAndView(<span class="string">&quot;success.jsp&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> mv;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å…¶ä»–è·³è½¬é¡µé¢çš„æ–¹æ³•"><a href="#å…¶ä»–è·³è½¬é¡µé¢çš„æ–¹æ³•" class="headerlink" title="å…¶ä»–è·³è½¬é¡µé¢çš„æ–¹æ³•"></a><strong>å…¶ä»–è·³è½¬é¡µé¢çš„æ–¹æ³•</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">-------------------------------------**è½¬å‘:forword**---------------------------------------------</span><br><span class="line"><span class="comment">//åŸå§‹è·³è½¬é¡µé¢æ–¹æ³•:</span></span><br><span class="line"><span class="meta">@RequestMapping(...)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ”¹å˜åçš„æ–¹æ³•:</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/hi&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;forword:/success.jsp&quot;</span>;<span class="comment">//ä½¿ç”¨forword:è¡¨ç¤ºè½¬å‘åˆ°å½“å‰é¡¹ç›®ä¸‹çš„æŒ‡å®šé¡µé¢.ä¸€å®šè¦åŠ ä¸Š/ï¼Œå¦åˆ™è¡¨ç¤ºç›¸å¯¹è·¯å¾„ï¼Œæ˜“å‡ºé”™</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ”¹å˜åçš„æ–¹æ³•:</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/hii&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;forword:/hi&quot;</span>;<span class="comment">//ä¹Ÿå¯ä»¥è·³è½¬åˆ°å…¶ä»–çš„è¯·æ±‚æ–¹æ³•ã€‚å¤šå±‚è·³è½¬</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-------------------------------------**é‡å®šå‘:redirect**---------------------------------------------</span><br><span class="line"><span class="meta">@RequestMapping(&quot;hi&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/success.jsp&quot;</span>;<span class="comment">//ä¹Ÿå¯ä»¥è·³è½¬åˆ°å…¶ä»–çš„è¯·æ±‚æ–¹æ³•ã€‚å¤šå±‚è·³è½¬</span></span><br><span class="line">&#125;  </span><br><span class="line"><span class="comment">//ä¹Ÿå¯ä»¥è¿›è¡Œå¤šå±‚è·³è½¬</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;he&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/hi&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h4><p>åç«¯æä¾›jsonå­—ç¬¦ä¸²ï¼Œå‰ç«¯å°†jsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯¹è±¡ã€‚</p><p>JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºJavaScriptå¯¹è±¡ï¼Œä½¿ç”¨JSON.parse()æ–¹æ³•</p><p>JavaScriptå¯¹è±¡è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²,ä½¿ç”¨JSON.stringify()æ–¹æ³•</p><h4 id="Jackson"><a href="#Jackson" class="headerlink" title="Jackson"></a>Jackson</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯¼å…¥ä¾èµ–</span></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">2.10</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ä½¿ç”¨ObjectMapperå°†å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/j1&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span><span class="comment">//ä¸ä¼šè¿›è¡Œè§†å›¾è§£æï¼Œåªä¼šè¿”å›å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">()</span><span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºObjectMapperå¯¹è±¡</span></span><br><span class="line">        ObjectMapper objectMapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="string">&quot;é©¬æµ©ç„¶&quot;</span>,<span class="number">23</span>,<span class="string">&quot;æ²³å—&quot;</span>);</span><br><span class="line">    <span class="comment">//ä½¿ç”¨objectMapperå¯¹è±¡ä¸­çš„æ–¹æ³•å°†å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²è¾“å‡º</span></span><br><span class="line">        String s = objectMapper.writeValueAsString(user);</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line"><span class="comment">//åœ¨ç±»ä¸Šç›´æ¥ä½¿ç”¨ @RestController ï¼Œè¿™æ ·é‡Œé¢æ‰€æœ‰çš„æ–¹æ³•éƒ½åªä¼šè¿”å›jsonå­—ç¬¦ä¸²ï¼Œä¸ç”¨å†æ¯ä¸€ä¸ªéƒ½æ·»åŠ @ResponseBody ï¼æˆ‘ä»¬åœ¨å‰åç«¯åˆ†ç¦»å¼€å‘ä¸­ï¼Œä¸€èˆ¬éƒ½ä½¿ç”¨ @RestController ï¼Œååˆ†ä¾¿æ·</span></span><br><span class="line">    <span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/json1&quot;)</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">json1</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException </span>&#123;</span><br><span class="line">       <span class="comment">//åˆ›å»ºä¸€ä¸ªjacksonçš„å¯¹è±¡æ˜ å°„å™¨ï¼Œç”¨æ¥è§£ææ•°æ®</span></span><br><span class="line">       ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">       <span class="comment">//åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">       User user = <span class="keyword">new</span> User(<span class="string">&quot;é©¬æµ©ç„¶&quot;</span>, <span class="number">23</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">       <span class="comment">//å°†æˆ‘ä»¬çš„å¯¹è±¡è§£ææˆä¸ºjsonæ ¼å¼</span></span><br><span class="line">       String str = mapper.writeValueAsString(user);</span><br><span class="line">       <span class="keyword">return</span> str;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å°è£…ä¸ºä¸€ä¸ªJsonUtil</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å·¥å…·ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JsonUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getJson</span><span class="params">(Object obj)</span></span>&#123;</span><br><span class="line">        ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> mapper.writeValueAsString(obj);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JsonProcessingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–¹æ³•è°ƒç”¨</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/j2&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="string">&quot;é©¬æµ©ç„¶&quot;</span>,<span class="number">23</span>,<span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> JsonUtil.getJson(user);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="Fastjson"><a href="#Fastjson" class="headerlink" title="Fastjson"></a>Fastjson</h4><blockquote><p>é˜¿é‡Œå·´å·´å¼€å‘ï¼Œæ–¹ä¾¿å®ç°jsonå¯¹è±¡ä¸javaBeanå¯¹è±¡ä¹‹é—´çš„ç›¸äº’è½¬æ¢.</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯¼å…¥ä¾èµ–</span></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">   &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">   &lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br><span class="line">   &lt;version&gt;<span class="number">1.2</span><span class="number">.60</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">    <span class="comment">//æ–¹æ³•ä¸­ä½¿ç”¨</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/j3&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test03</span><span class="params">()</span></span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="string">&quot;mhy&quot;</span>, <span class="number">23</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">    <span class="comment">//åŒºåˆ«jacksonä¸­ç¬¬ä¸€æ­¥è¦åˆ›å»ºä¸€ä¸ªObjectMapperå¯¹è±¡ã€‚FastJsonç›´æ¥ä½¿ç”¨JSON.è°ƒç”¨æ–¹æ³•å³å¯</span></span><br><span class="line">        String s = JSON.toJSONString(user);</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="è§£å†³ä¹±ç é—®é¢˜"><a href="#è§£å†³ä¹±ç é—®é¢˜" class="headerlink" title="è§£å†³ä¹±ç é—®é¢˜"></a>è§£å†³ä¹±ç é—®é¢˜</h4><p>åœ¨web.xmlé…ç½®springå®˜æ–¹è¿‡æ»¤å™¨å³å¯:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- è§£å†³JSONä¹±ç  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mvc:message-converters</span> <span class="attr">register-defaults</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;objectMapper&quot;</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean&quot;</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;failOnEmptyBeans&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="RestFul-CRUD"><a href="#RestFul-CRUD" class="headerlink" title="RestFul_(CRUD)"></a>RestFul_(CRUD)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">ä»¥ç®€æ´çš„URLæäº¤è¯·æ±‚</span><br><span class="line">    åŸå§‹å¯¹æ•°æ®åº“è¿›è¡ŒCRUDï¼š</span><br><span class="line">    /getBook?id=<span class="number">1</span>:æŸ¥è¯¢å›¾ä¹¦</span><br><span class="line">    /deleteBook?id=<span class="number">1</span>:åˆ é™¤<span class="number">1</span>å·å›¾ä¹¦</span><br><span class="line">    /updateBook?id=<span class="number">1</span>:æ›´æ–°<span class="number">1</span>å·å›¾ä¹¦</span><br><span class="line">    /addBook:æ·»åŠ å›¾ä¹¦</span><br><span class="line">RESTæ¨èï¼š</span><br><span class="line">    /èµ„æºå/èµ„æºæ ‡è¯†ç¬¦</span><br><span class="line">    /book/<span class="number">1</span>:GET----æŸ¥è¯¢<span class="number">1</span>å·å›¾ä¹¦</span><br><span class="line">    /book/<span class="number">1</span>:PUT----æ›´æ–°<span class="number">1</span>å·å›¾ä¹¦</span><br><span class="line">/book/<span class="number">1</span>:DELETE--åˆ é™¤<span class="number">1</span>å·å›¾ä¹¦</span><br><span class="line">    /book/<span class="number">1</span>:POST----æ·»åŠ å›¾ä¹¦</span><br><span class="line">------------------------------------------------------------------------------------------------------</span><br><span class="line">å®ç°æ–¹æ³•:(ä½¿ç”¨filterè½¬æ¢deleteå’Œputè¯·æ±‚)</span><br><span class="line"><span class="number">1</span>ã€åœ¨web.xmlé…ç½®filter</span><br><span class="line">    </span><br><span class="line">     &lt;filter&gt;</span><br><span class="line">        &lt;filter-name&gt;HiddenHttpMethodFilter&lt;/filter-name&gt;</span><br><span class="line">        &lt;filter-<span class="class"><span class="keyword">class</span>&gt;<span class="title">org</span>.<span class="title">springframework</span>.<span class="title">web</span>.<span class="title">filter</span>.<span class="title">HiddenHttpMethodFilter</span>&lt;/<span class="title">filter</span>-<span class="title">class</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">filter</span>&gt;</span></span><br><span class="line"><span class="class">            </span></span><br><span class="line"><span class="class">    &lt;<span class="title">filter</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">filter</span>-<span class="title">name</span>&gt;<span class="title">HiddenHttpMethodFilter</span>&lt;/<span class="title">filter</span>-<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">url</span>-<span class="title">pattern</span>&gt;/*&lt;/<span class="title">url</span>-<span class="title">pattern</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">filter</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">2ã€åœ¨é¡µé¢ä¸­åˆ›å»ºè¡¨å•ï¼Œä½¿ç”¨&lt;<span class="title">input</span> <span class="title">name</span></span>=<span class="string">&quot;_method&quot;</span> value=<span class="string">&quot;&#123;deleteã€put&#125;&quot;</span>&gt;æ¥è®¾ç½®åˆ é™¤å’Œæ›´æ–°</span><br><span class="line"></span><br><span class="line">&lt;form action=<span class="string">&quot;book/1&quot;</span> method=<span class="string">&quot;get&quot;</span>&gt;</span><br><span class="line">  &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;æŸ¥è¯¢å›¾ä¹¦&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">        </span><br><span class="line">  &lt;form action=<span class="string">&quot;book&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;æ·»åŠ å›¾ä¹¦&quot;</span>&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">  &lt;form action=<span class="string">&quot;book/1&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input name=<span class="string">&quot;_method&quot;</span> value=<span class="string">&quot;delete&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;åˆ é™¤1å·å›¾ä¹¦&quot;</span>&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">  &lt;form action=<span class="string">&quot;book/1&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input name=<span class="string">&quot;_method&quot;</span> value=<span class="string">&quot;put&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;æ›´æ–°1å·å›¾ä¹¦&quot;</span>&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">  </span><br><span class="line"><span class="number">3</span>ã€åœ¨æ§åˆ¶å™¨ä¸­åŠ å…¥methodæ¡ä»¶æ¥è·å–è¡¨å•ä¸­å…·ä½“çš„CRUDæ“ä½œ</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/book/&#123;bid&#125;&quot;,method = RequestMethod.GET)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">selectBook</span><span class="params">(<span class="meta">@PathVariable(&quot;bid&quot;)</span>Integer id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æŸ¥è¯¢åˆ°äº†&quot;</span>+id+<span class="string">&quot;å›¾ä¹¦&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;/WEB-INF/pages/success.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/book&quot;,method = RequestMethod.POST)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">addBook</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ·»åŠ å›¾ä¹¦&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;/WEB-INF/pages/success.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/book/&#123;bid&#125;&quot;,method = RequestMethod.DELETE)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">deleteBook</span><span class="params">(<span class="meta">@PathVariable(&quot;bid&quot;)</span> Integer id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤&quot;</span>+id+<span class="string">&quot;å›¾ä¹¦&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;/WEB-INF/pages/success.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/book/&#123;bid&#125;&quot;,method = RequestMethod.PUT)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">updateBook</span><span class="params">(<span class="meta">@PathVariable(&quot;bid&quot;)</span> Integer id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ›´æ–°&quot;</span>+id+<span class="string">&quot;å›¾ä¹¦&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;/WEB-INF/pages/success.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼Œtomcatç‰ˆæœ¬é«˜ï¼Œå¯èƒ½æŠ¥<span class="number">405</span>ï¼Œè§£å†³åŠæ³•åœ¨ç•Œé¢ä¸­åŠ å…¥ isErrorPage=<span class="string">&quot;true&quot;</span></span><br></pre></td></tr></table></figure><h3 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h3><p><a href="https://mp.weixin.qq.com/s/tB4YX4H59wYS6rxaO3K2_g">ç‹‚ç¥è¯´SpringMVC07ï¼šAjaxç ”ç©¶</a></p><h3 id="æ‹¦æˆªå™¨-æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½"><a href="#æ‹¦æˆªå™¨-æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½" class="headerlink" title="æ‹¦æˆªå™¨+æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½"></a>æ‹¦æˆªå™¨+æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½</h3><p>ä»£ç æ˜¯æ­»çš„ï¼Œå®ç°æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½ä»£ç ï¼Œå®é™…ä¸­ç›´æ¥æ‹·è´</p><p><a href="https://mp.weixin.qq.com/s/NWJoYiirbkSDz6x01Jji3g">ç‹‚ç¥è¯´SpringMVC08ï¼šæ‹¦æˆªå™¨+æ–‡ä»¶ä¸Šä¼ ä¸‹è½½</a></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><p><a href="https://www.bilibili.com/video/BV1aE41167Tu?p=17">ã€ç‹‚ç¥è¯´Javaã€‘SpringMVCæœ€æ–°æ•™ç¨‹IDEAç‰ˆé€šä¿—æ˜“æ‡‚</a></p>]]></content>
      
      
      <categories>
          
          <category> Springå¤§å®¶æ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SSM </tag>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
            <tag> SpringMVC </tag>
            
            <tag> REST </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring</title>
      <link href="/2021/04/02/Spring/"/>
      <url>/2021/04/02/Spring/</url>
      
        <content type="html"><![CDATA[<h2 id="æ‰¯ä¸€ä¸‹ï¼š"><a href="#æ‰¯ä¸€ä¸‹ï¼š" class="headerlink" title="æ‰¯ä¸€ä¸‹ï¼š"></a>æ‰¯ä¸€ä¸‹ï¼š</h2><p><strong>Springæ˜¯ä¸ªå•¥?</strong></p><span id="more"></span><blockquote><p>è½»é‡çº§çš„å¼€æºã€å…è´¹æ¡†æ¶</p><p>æ§åˆ¶åè½¬IOCã€é¢å‘åˆ‡é¢AOP</p><p>è®©ä¼ä¸šçº§å¼€å‘æ›´ç®€å•</p><p>åº•å±‚åŸç†ï¼š</p><ol><li>xmlè§£æ</li><li>å·¥å‚æ¨¡å¼</li><li>åå°„</li></ol><p>å¼Šç«¯ï¼šé…ç½®å¤ªç¹çã€éº»çƒ¦</p></blockquote><p><strong>äº†è§£IOCå’ŒAOPï¼Œä¸å¿…çº ç»“å¤ªæ·±ï¼ŒSpringBootå·²ç»å°†SSMæ¡†æ¶åšäº†æ•´åˆï¼Œçœå»äº†ä¸€äº›éº»çƒ¦çš„é…ç½®.</strong></p><h2 id="IOC"><a href="#IOC" class="headerlink" title="IOC"></a>IOC</h2><p><em><strong>æ§åˆ¶åè½¬ï¼Œæ˜¯ä¸€ç§æ€æƒ³ã€‚æ²¡æœ‰IOCä¹‹å‰ï¼Œåˆ›å»ºå¯¹è±¡å’Œå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ç”±ç¨‹åºæ¥å†³å®šï¼ŒIOCä¹‹åå°†åˆ›å»ºå¯¹è±¡äº¤ç»™äº†ç¬¬ä¸‰æ–¹</strong></em></p><p><strong>ä½¿ç”¨IOCä¹‹å‰:</strong></p><p>pojoï¼šxxx</p><p>Daoï¼šxxxDaoâ†’xxxDaoImpl</p><p>serviceï¼šxxxServiceâ†’xxxServiceImplï¼ˆnew xxxDaoï¼ˆï¼‰ï¼‰</p><p><strong>ä½¿ç”¨IOCä¹‹å</strong></p><p>pojo:xxx</p><p>bean.xmlé…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=<span class="string">&quot;xxx&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;com.xxx.pojo.xxx&quot;</span>&gt;</span><br><span class="line"><span class="comment">//nameæ˜¯pojoé‡Œè¾¹çš„å±æ€§ï¼Œvalueæ˜¯ç»™å±æ€§èµ‹çš„å€¼</span></span><br><span class="line">       &lt;property name=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;Spring&quot;</span>/&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š</p><p>ä½¿ç”¨é…ç½®æ–‡ä»¶ç»™å±æ€§èµ‹å€¼ï¼Œpojoé‡Œå¿…é¡»æœ‰å¯¹åº”çš„setå±æ€§</p></blockquote><p>test: </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è§£æbeans.xmlæ–‡ä»¶ , ç”Ÿæˆç®¡ç†ç›¸åº”çš„Beanå¯¹è±¡</span></span><br><span class="line">   ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">   <span class="comment">//getBean : å‚æ•°å³ä¸ºspringé…ç½®æ–‡ä»¶ä¸­beançš„id .</span></span><br><span class="line">   User user = (User) context.getBean(<span class="string">&quot;xxx&quot;</span>);</span><br><span class="line">   user.show();</span><br></pre></td></tr></table></figure><h3 id="DIä¾èµ–æ³¨å…¥"><a href="#DIä¾èµ–æ³¨å…¥" class="headerlink" title="DIä¾èµ–æ³¨å…¥"></a>DIä¾èµ–æ³¨å…¥</h3><ul><li>ä¾èµ– : æŒ‡Beanå¯¹è±¡çš„åˆ›å»ºä¾èµ–äºå®¹å™¨ . Beanå¯¹è±¡çš„ä¾èµ–èµ„æº .</li><li>æ³¨å…¥ : æŒ‡Beanå¯¹è±¡æ‰€ä¾èµ–çš„èµ„æº , ç”±å®¹å™¨æ¥è®¾ç½®å’Œè£…é… .</li></ul><h4 id="Setæ³¨å…¥ï¼š"><a href="#Setæ³¨å…¥ï¼š" class="headerlink" title="Setæ³¨å…¥ï¼š"></a><strong>Setæ³¨å…¥ï¼š</strong></h4><p>pojoç±»:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Address</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAddress</span><span class="params">(String address)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.address = address;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">     <span class="keyword">private</span> String name;</span><br><span class="line">     <span class="keyword">private</span> Address address;</span><br><span class="line">     <span class="keyword">private</span> String[] books;</span><br><span class="line">     <span class="keyword">private</span> List&lt;String&gt; hobbys;</span><br><span class="line">     <span class="keyword">private</span> Map&lt;String,String&gt; card;</span><br><span class="line">     <span class="keyword">private</span> Set&lt;String&gt; games;</span><br><span class="line">     <span class="keyword">private</span> String wife;</span><br><span class="line">     <span class="keyword">private</span> Properties info;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><p>å¸¸é‡æ³¨å…¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å°æ˜&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ³¨å…¥Bean</p><p><strong>å¼•ç”¨çš„æ˜¯ref</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;addr&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.pojo.Address&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">value</span>=<span class="string">&quot;é‡åº†&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å°æ˜&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;addr&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ³¨å…¥æ•°ç»„</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å°æ˜&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;addr&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;books&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>è¥¿æ¸¸è®°<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>çº¢æ¥¼æ¢¦<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>æ°´æµ’ä¼ <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ³¨å…¥List</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;hobbys&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">value</span>&gt;</span>å¬æ­Œ<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">value</span>&gt;</span>çœ‹ç”µå½±<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">value</span>&gt;</span>çˆ¬å±±<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ³¨å…¥Map</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;ä¸­å›½é‚®æ”¿&quot;</span> <span class="attr">value</span>=<span class="string">&quot;456456456465456&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;å»ºè®¾&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1456682255511&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ³¨å…¥set</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;games&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>LOL<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>BOB<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>COC<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ³¨å…¥Null</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;wife&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">null</span>/&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ³¨å…¥Properties</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;å­¦å·&quot;</span>&gt;</span>20190604<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;æ€§åˆ«&quot;</span>&gt;</span>ç”·<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;å§“å&quot;</span>&gt;</span>å°æ˜<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="Cå‘½åå’ŒPå‘½åæ³¨å…¥"><a href="#Cå‘½åå’ŒPå‘½åæ³¨å…¥" class="headerlink" title="Cå‘½åå’ŒPå‘½åæ³¨å…¥"></a>Cå‘½åå’ŒPå‘½åæ³¨å…¥</h4><blockquote><p>Cå‘½åå’ŒPå‘½åæ³¨å…¥éƒ½éœ€è¦åœ¨é…ç½®æ–‡ä»¶çš„å¤´æ–‡ä»¶ä¸­åŠ å…¥çº¦æŸ</p><p>På‘½åçº¦æŸ:xmlns:p=â€<a href="http://www.springframework.org/schema/p&quot;">http://www.springframework.org/schema/p&quot;</a></p><p>Cå‘½åçº¦æŸ:xmlns:c=â€<a href="http://www.springframework.org/schema/c&quot;">http://www.springframework.org/schema/c&quot;</a></p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">&lt;!--P(å±æ€§: properties)å‘½åç©ºé—´--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.pojo.User&quot;</span> <span class="attr">p:name</span>=<span class="string">&quot;mhy&quot;</span> <span class="attr">p:age</span>=<span class="string">&quot;18&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--C(æ„é€ : Constructor)å‘½åç©ºé—´--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.pojo.User&quot;</span> <span class="attr">c:name</span>=<span class="string">&quot;mhy&quot;</span> <span class="attr">c:age</span>=<span class="string">&quot;18&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><ul><li>æ³¨æ„ï¼Œpojoé‡Œè¾¹çš„setæ–¹æ³•åˆ«å¿˜äº†</li></ul><p><strong>pojoçš„æ— å‚æ„é€ å™¨æ€ä¹ˆä¼ é€’å‚æ•°?</strong></p><p>pojo:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> class <span class="title">User</span><span class="params">()</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨å…¥æ–¹æ³•:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç¬¬ä¸€ç§æ ¹æ®indexå‚æ•°ä¸‹æ ‡è®¾ç½® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.pojo.UserT&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- indexæŒ‡æ„é€ æ–¹æ³• , ä¸‹æ ‡ä»0å¼€å§‹ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mhy&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ç¬¬äºŒç§æ ¹æ®å‚æ•°åå­—è®¾ç½® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.pojo.UserT&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- nameæŒ‡å‚æ•°å --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mhy&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ç¬¬ä¸‰ç§æ ¹æ®å‚æ•°ç±»å‹è®¾ç½® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.pojo.UserT&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mhy&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Beançš„ä½œç”¨åŸŸ"><a href="#Beançš„ä½œç”¨åŸŸ" class="headerlink" title="Beançš„ä½œç”¨åŸŸ"></a>Beançš„ä½œç”¨åŸŸ</h3><p>ä¸€å…±æœ‰å››ç§ï¼š</p><ol><li><p>singleton</p><blockquote><p>å•ä¾‹æ¨¡å¼ï¼ŒSpringé»˜è®¤æœºåˆ¶</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;ServiceImpl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.csdn.service.ServiceImpl&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;singleton&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">    User user = (User) context.getBean(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">    User user2 = (User) context.getBean(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">    System.out.println(user==user2);<span class="comment">//ç»“æœä¸ºtrue</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>prototype</p><blockquote><p>åŸå‹æ¨¡å¼ï¼Œæ¯æ¬¡getçš„æ—¶å€™ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°å¯¹è±¡</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;account&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.foo.DefaultAccount&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>/&gt;</span>  </span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">    User user = (User) context.getBean(<span class="string">&quot;account&quot;</span>);</span><br><span class="line">    User user2 = (User) context.getBean(<span class="string">&quot;account&quot;</span>);</span><br><span class="line">    System.out.println(user==user2);<span class="comment">//ç»“æœä¸ºfalse</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>request</p></li><li><p>session</p></li></ol><h3 id="Beanè‡ªåŠ¨è£…é…"><a href="#Beanè‡ªåŠ¨è£…é…" class="headerlink" title="Beanè‡ªåŠ¨è£…é…"></a>Beanè‡ªåŠ¨è£…é…</h3><p>Springä¸­beanæœ‰ä¸‰ç§è£…é…æœºåˆ¶ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ol><li>åœ¨xmlä¸­æ˜¾å¼é…ç½®ï¼›</li><li>åœ¨javaä¸­æ˜¾å¼é…ç½®ï¼›</li><li>éšå¼çš„beanå‘ç°æœºåˆ¶å’Œè‡ªåŠ¨è£…é…ã€‚**(é‡ç‚¹)**</li></ol><h4 id="byName"><a href="#byName" class="headerlink" title="byName"></a>byName</h4><blockquote><p>æŒ‰åå­—è‡ªåŠ¨è£…é…</p></blockquote><p>åˆ›å»ºå®ä½“ç±» Catã€Dogã€User</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cat</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shout</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;miao~&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shout</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;wang~&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> Cat cat;</span><br><span class="line">   <span class="keyword">private</span> Dog dog;</span><br><span class="line">   <span class="keyword">private</span> String str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŸå§‹çš„æ³¨å…¥:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.pojo.Dog&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.pojo.Cat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.pojo.User&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;cat&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dog&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;str&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mhy&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨byNameï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.pojo.Dog&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.pojo.Cat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.pojo.User&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;str&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mhy&quot;</span>/&gt;</span></span><br><span class="line">        </span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>ç»“è®º</strong>ï¼šä½¿ç”¨byNameæ³¨å…¥ï¼Œä¼šæ ¹æ®setå»æ‰¾å¯¹åº”çš„æ–¹æ³•ï¼Œæ¯”å¦‚setCat()ã€‚å¦‚æœå°†cat çš„bean idæ”¹ä¸ºcat01ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºæ‰¾ä¸åˆ°å¯¹åº”çš„setCat01æ–¹æ³•ã€‚<br>byNameæ˜¯æŒ‰ç…§setæ–¹æ³•ï¼Œæ¯”å¦‚setDogï¼ˆï¼‰æ–¹æ³•ï¼Œå°†setå»æ‰ï¼Œç„¶åDogè½¬æ¢å°å†™ä¸ºdogï¼Œç„¶åå»æŸ¥æ‰¾æœ‰æ²¡æœ‰å¯¹åº”çš„bean idã€‚</p><h4 id="byType"><a href="#byType" class="headerlink" title="byType"></a>byType</h4><blockquote><p>æŒ‰ç±»å‹è¿›è¡Œè£…é…</p></blockquote><p>å°†autowireæ”¹ä¸ºbyType</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.Dog&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.Cat&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.Cat&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.pojo.User&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;str&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mhy&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>æ³¨æ„ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªbeanå¯¹è±¡ï¼Œä¾‹å¦‚ä¸Šè¾¹ä»£ç åˆ›å»ºäº†ä¸¤ä¸ªcatå¯¹è±¡:catå’Œcat2ï¼Œè¿™æ ·å°±ä¼šNoUniqueBeanDefinitionExceptionï¼ˆä¸å”¯ä¸€ï¼‰é”™.</li></ul><p>ä¿®æ”¹å:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span>  <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.Dog&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span>  <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.Cat&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.pojo.User&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;str&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mhy&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong>ä½¿ç”¨byTypeç”šè‡³å¯ä»¥å°†bean idåˆ é™¤ä¸å†™ï¼Œä½†è¦ä¿è¯å¯¹è±¡çš„å”¯ä¸€æ€§</p><h3 id="ä½¿ç”¨æ³¨è§£æ¥è£…é…"><a href="#ä½¿ç”¨æ³¨è§£æ¥è£…é…" class="headerlink" title="ä½¿ç”¨æ³¨è§£æ¥è£…é…"></a>ä½¿ç”¨æ³¨è§£æ¥è£…é…</h3><h4 id="Autowired"><a href="#Autowired" class="headerlink" title="@Autowired"></a>@Autowired</h4><ol><li><p><em>ä½¿ç”¨æ³¨è§£è¦å¼•ç”¨Springçš„aopåŒ…</em></p></li><li><p>åœ¨é…ç½®æ–‡ä»¶ä¸­å¼•å…¥contextçº¦æŸ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span> /&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨ç±»ä¸ŠåŠ å…¥@Autowire</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ClassPathXmlApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">        Animal animal = context.getBean(<span class="string">&quot;animal&quot;</span>, Animal.class);</span><br><span class="line">        animal.getCat().say();</span><br><span class="line">        animal.getDog().say();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="Resource"><a href="#Resource" class="headerlink" title="@Resource"></a><strong>@Resource</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>javaåŸç”Ÿæ€çš„æ³¨è§£</p><p>@Resource(name=â€xxxâ€),è¡¨ç¤ºå¦‚æœç±»æœ‰å¤šä¸ªå¯¹è±¡ï¼Œå¯ä»¥æŒ‡å®šidåæ¥è£…é…</p></blockquote><p>@Autowiredå’Œ@ResourceåŒºåˆ«ï¼š</p><ul><li>éƒ½å¯ä»¥æ”¾åœ¨å±æ€§å­—æ®µä¸Š</li><li>@Autowiredæ˜¯é€šè¿‡byTypeå®ç°ï¼Œè€Œä¸”å¿…é¡»è¦æ±‚å¯¹è±¡åå­—å­˜åœ¨ï¼Œä¹Ÿå°±æ˜¯è¯´<bean id="cat" class="..." />,ä¸­idå¿…é¡»å­˜åœ¨</li><li>@Resourceé»˜è®¤é€šè¿‡byNameå®ç°ï¼Œå¦‚æœæ‰¾ä¸åˆ°åå­—ï¼Œå°±æŒ‰byTypeå®ç°</li><li>ä¸¤è€…éƒ½æ¯”è¾ƒå¸¸ç”¨</li></ul><h3 id="ä½¿ç”¨æ³¨è§£å¼€å‘"><a href="#ä½¿ç”¨æ³¨è§£å¼€å‘" class="headerlink" title="ä½¿ç”¨æ³¨è§£å¼€å‘"></a>ä½¿ç”¨æ³¨è§£å¼€å‘</h3><ol><li><p>æ·»åŠ contextçº¦æŸ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--æŒ‡å®šæ³¨è§£æ‰«æåŒ…--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.mhy.pojo&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨ç±»ä¸ŠåŠ å…¥æ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;user&quot;)</span><span class="comment">// ç›¸å½“äºé…ç½®æ–‡ä»¶ä¸­ &lt;bean id=&quot;user&quot; class=&quot;å½“å‰æ³¨è§£çš„ç±»&quot;/&gt;</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">   <span class="keyword">public</span> String name = <span class="string">&quot;mhy&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><ul><li><p>æ³¨å…¥å±æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;user&quot;)</span><span class="comment">// ç›¸å½“äºé…ç½®æ–‡ä»¶ä¸­ &lt;bean id=&quot;user&quot; class=&quot;å½“å‰æ³¨è§£çš„ç±»&quot;/&gt;</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Value(&quot;mhy&quot;)</span><span class="comment">// ç›¸å½“äºé…ç½®æ–‡ä»¶ä¸­ &lt;property name=&quot;name&quot; value=&quot;mhy&quot;/&gt;</span></span><br><span class="line">   <span class="keyword">public</span> String name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœæœ‰setæ–¹æ³•ï¼Œå¯ä»¥åœ¨setæ–¹æ³•ä¸Šæ·»åŠ value</span></span><br><span class="line"><span class="meta">@Value(&quot;mhy&quot;)</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>@Componentçš„è¡ç”Ÿæ³¨è§£</strong></p><blockquote><p>ä¸ºäº†æ›´å¥½çš„è¿›è¡Œåˆ†å±‚ï¼ŒSpringå¯ä»¥ä½¿ç”¨å…¶å®ƒä¸‰ä¸ªæ³¨è§£ï¼ŒåŠŸèƒ½ä¸€æ ·</p></blockquote><ul><li>@Controllerï¼šwebå±‚</li><li>@Serviceï¼šserviceå±‚</li><li>@Repositoryï¼šdaoå±‚</li></ul><p><strong>æ€»ç»“</strong></p><p><strong>XMLä¸æ³¨è§£æ¯”è¾ƒ</strong></p><ul><li>XMLå¯ä»¥é€‚ç”¨ä»»ä½•åœºæ™¯ ï¼Œç»“æ„æ¸…æ™°ï¼Œç»´æŠ¤æ–¹ä¾¿</li><li>æ³¨è§£ä¸æ˜¯è‡ªå·±æä¾›çš„ç±»ä½¿ç”¨ä¸äº†ï¼Œå¼€å‘ç®€å•æ–¹ä¾¿</li></ul><p><strong>xmlä¸æ³¨è§£æ•´åˆå¼€å‘</strong> ï¼šæ¨èæœ€ä½³å®è·µ</p><ul><li>xmlç®¡ç†Bean</li><li>æ³¨è§£å®Œæˆå±æ€§æ³¨å…¥</li><li>ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œ å¯ä»¥ä¸ç”¨æ‰«æï¼Œæ‰«ææ˜¯ä¸ºäº†ç±»ä¸Šçš„æ³¨è§£</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- xmlåªç®¡ç†bean --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.pojo.Cat&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.pojo.Dog&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;animal&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.pojo.Animal&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å±æ€§ç”±æ³¨è§£å®Œæˆ</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> class <span class="title">person</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="meta">@Value(&quot;mhy&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"><span class="meta">@Value(&quot;henan&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String adress;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨javaç±»è¿›è¡Œé…ç½®å¼€å‘"><a href="#ä½¿ç”¨javaç±»è¿›è¡Œé…ç½®å¼€å‘" class="headerlink" title="ä½¿ç”¨javaç±»è¿›è¡Œé…ç½®å¼€å‘"></a>ä½¿ç”¨javaç±»è¿›è¡Œé…ç½®å¼€å‘</h3><p><em><strong>ä½¿ç”¨ä¸€ä¸ªjavaç±»æ¥ä»£æ›¿xmlé…ç½®æ–‡ä»¶</strong></em></p><ol><li><p>æ–°å»ºä¸€ä¸ªç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>  <span class="comment">//å°†è¿™ä¸ªç±»æ ‡æ³¨ä¸ºSpringçš„ä¸€ä¸ªç»„ä»¶ï¼Œæ”¾åˆ°å®¹å™¨ä¸­ï¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">   <span class="keyword">public</span> String name = <span class="string">&quot;dog&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ–°å»ºä¸€ä¸ªconfigåŒ…ï¼Œç¼–å†™ä¸€ä¸ªconfigé…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>  <span class="comment">//ä»£è¡¨è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»</span></span><br><span class="line"><span class="meta">@Import(MyConfig2.class)</span><span class="comment">//å¯ä»¥å¯¼å…¥å…¶ä»–é…ç½®</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Bean</span> <span class="comment">//é€šè¿‡æ–¹æ³•æ³¨å†Œä¸€ä¸ªbeanï¼Œè¿™é‡Œçš„è¿”å›å€¼å°±Beançš„ç±»å‹ï¼Œæ–¹æ³•åå°±æ˜¯beançš„idï¼</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Dog <span class="title">dog</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> Dog();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•ï¼Œä½¿ç”¨AnnotationConfigApplicationContext</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">   ApplicationContext applicationContext = <span class="keyword">new</span> AnnotationConfigApplicationContext(MyConfig.class);</span><br><span class="line">   Dog dog = (Dog) applicationContext.getBean(<span class="string">&quot;dog&quot;</span>);</span><br><span class="line">   System.out.println(dog.name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="åŠ¨æ€ä»£ç†"><a href="#åŠ¨æ€ä»£ç†" class="headerlink" title="åŠ¨æ€ä»£ç†"></a>åŠ¨æ€ä»£ç†</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªåŠ¨æ€ä»£ç†ç±»</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyInvocationHandler</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> Object target;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTarget</span><span class="params">(Object target)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.target = target;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//ç”Ÿæˆä»£ç†ç±»</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Object <span class="title">getProxy</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">return</span> Proxy.newProxyInstance(<span class="keyword">this</span>.getClass().getClassLoader(),</span><br><span class="line">               target.getClass().getInterfaces(),<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// proxy : ä»£ç†ç±»</span></span><br><span class="line">   <span class="comment">// method : ä»£ç†ç±»çš„è°ƒç”¨å¤„ç†ç¨‹åºçš„æ–¹æ³•å¯¹è±¡.</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">       log(method.getName());</span><br><span class="line">       Object result = method.invoke(target, args);</span><br><span class="line">       <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">log</span><span class="params">(String methodName)</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;æ‰§è¡Œäº†&quot;</span>+methodName+<span class="string">&quot;æ–¹æ³•&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//çœŸå®å¯¹è±¡</span></span><br><span class="line">       UserServiceImpl userService = <span class="keyword">new</span> UserServiceImpl();</span><br><span class="line">       <span class="comment">//ä»£ç†å¯¹è±¡çš„è°ƒç”¨å¤„ç†ç¨‹åº</span></span><br><span class="line">       ProxyInvocationHandler pih = <span class="keyword">new</span> ProxyInvocationHandler();</span><br><span class="line">       pih.setTarget(userService); <span class="comment">//è®¾ç½®è¦ä»£ç†çš„å¯¹è±¡</span></span><br><span class="line">       UserService proxy = (UserService)pih.getProxy(); <span class="comment">//åŠ¨æ€ç”Ÿæˆä»£ç†ç±»ï¼</span></span><br><span class="line">       proxy.delete();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h2><p><em><strong>é¢å‘åˆ‡é¢ï¼Œä¸ä¿®æ”¹æºä»£ç è¿›è¡ŒåŠŸèƒ½å¢å¼ºã€‚åº•å±‚æ˜¯åŠ¨æ€ä»£ç†æ¨¡å¼</strong></em></p><p>é€šè¿‡adviceå®šä¹‰æ¨ªåˆ‡,æœ‰äº”ç§,<a href="https://mp.weixin.qq.com/s/zofgBRRrnEf17MiGZN8IJQ">å…·ä½“ç‚¹å‡»é“¾æ¥</a></p><h3 id="ä½¿ç”¨Springå®ç°AOP"><a href="#ä½¿ç”¨Springå®ç°AOP" class="headerlink" title="ä½¿ç”¨Springå®ç°AOP"></a>ä½¿ç”¨Springå®ç°AOP</h3><blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--è®°å¾—å¯¼åŒ…--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></blockquote><p>1ã€ç¼–å†™serviceæ¥å£å’Œå®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Serviceæ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addUser</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteUser</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateUser</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">queryUser</span><span class="params">()</span></span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¥å£å®ç°ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;add&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;delete&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;update&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">queryUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;query&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ã€ç¼–å†™ä¸€ä¸ªå‰ç½®å¢å¼ºç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">log</span> <span class="keyword">implements</span> <span class="title">MethodBeforeAdvice</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line"> <span class="comment">//method : è¦æ‰§è¡Œçš„ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line">   <span class="comment">//objects : è¢«è°ƒç”¨çš„æ–¹æ³•çš„å‚æ•°</span></span><br><span class="line"> <span class="comment">//Object : ç›®æ ‡å¯¹è±¡</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">(Method method, Object[] objects, Object o)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(o.getClass().getName()+<span class="string">&quot;çš„&quot;</span>+method.getName()+<span class="string">&quot;æ–¹æ³•æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3ã€æ³¨å†Œbeanï¼Œå®ç°AOP</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;log&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.service.log&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.service.UserServiceImpl&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.mhy.service.UserServiceImpl.*(..))&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;log&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure><p>4ã€æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">        UserService userService = (UserService) context.getBean(<span class="string">&quot;userService&quot;</span>);</span><br><span class="line">        userService.addUser();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰ç±»å®ç°AOP"><a href="#è‡ªå®šä¹‰ç±»å®ç°AOP" class="headerlink" title="è‡ªå®šä¹‰ç±»å®ç°AOP"></a>è‡ªå®šä¹‰ç±»å®ç°AOP</h3><p>1ã€ç¼–å†™æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DiyPointcut</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;---------æ–¹æ³•æ‰§è¡Œå‰---------&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;---------æ–¹æ³•æ‰§è¡Œå---------&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ã€é…ç½®beanæ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ³¨å†Œbean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;diy&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.config.DiyPointcut&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--aopçš„é…ç½®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--ç¬¬äºŒç§æ–¹å¼ï¼šä½¿ç”¨AOPçš„æ ‡ç­¾å®ç°--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;diy&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;diyPonitcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.mhy.service.UserServiceImpl.*(..))&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;diyPonitcut&quot;</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;diyPonitcut&quot;</span> <span class="attr">method</span>=<span class="string">&quot;after&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3ã€æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">       ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">       UserService userService = (UserService) context.getBean(<span class="string">&quot;userService&quot;</span>);</span><br><span class="line">       userService.add();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æ³¨è§£å®ç°AOP"><a href="#ä½¿ç”¨æ³¨è§£å®ç°AOP" class="headerlink" title="ä½¿ç”¨æ³¨è§£å®ç°AOP"></a>ä½¿ç”¨æ³¨è§£å®ç°AOP</h3><p>1ã€ç¼–å†™å¢å¼ºç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnnotationPointcut</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before(&quot;execution(* com.mhy.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ã€æ³¨å†Œbeanï¼ŒåŠ å…¥æ”¯æŒæ³¨è§£é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;annotationPointcut&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.config.AnnotationPointcut&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>3ã€æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">        UserService userService = (UserService) context.getBean(<span class="string">&quot;userService&quot;</span>);</span><br><span class="line">        userService.addUser();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="Springæ•´åˆMyBatis"><a href="#Springæ•´åˆMyBatis" class="headerlink" title="Springæ•´åˆMyBatis"></a>Springæ•´åˆMyBatis</h2><h3 id="æ•´åˆæ–¹å¼ä¸€"><a href="#æ•´åˆæ–¹å¼ä¸€" class="headerlink" title="æ•´åˆæ–¹å¼ä¸€:"></a>æ•´åˆæ–¹å¼ä¸€:</h3><ol><li><p>æ•´åˆMyBatisä¹‹å‰ï¼Œå¯ä»¥å‚è€ƒMyBatisåšå®¢ä¸­æ²¡æœ‰æ•´åˆä¹‹å‰çš„å†™æ³•</p></li><li><p>æ•´åˆMyBatiséœ€è¦ç”¨åˆ°<a href="http://mybatis.org/spring/zh/index.html">MyBatis-Spring</a>,è®°å¾—å¯¼å…¥å¯¹åº”çš„ä¾èµ–åŒ…</p></li><li><p>åœ¨Springé…ç½®æ–‡ä»¶ä¸­é…ç½®dataSource</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--   è·å–dataSourceï¼Œä½¿ç”¨Springæ•°æ®æºé…ç½®mybatisé…ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;datasource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=false<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="symbol">&amp;amp;</span>serverTimezone=UTC&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨SqlSessionFactoryBeanåˆ›å»ºSqlSessionFactoryï¼Œä½†éœ€è¦ä¸€ä¸ªdatasource</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--   sqlsessionFactory --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;datasource&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç»‘å®šmybatisé…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath*:com/mhy/mapper/*.xml&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨sqlSessionFactoryä½œä¸ºæ„é€ æ–¹æ³•åˆ›å»ºSqlSessionTemplateå¯¹è±¡</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlsession&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åªèƒ½ä½¿ç”¨æ„é€ å™¨æ³¨å…¥ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™DAOï¼Œä»¥åŠMapper.xml,å’Œå®ç°ç±»,è¿™é‡Œåªå†™å®ç°ç±»,å› ä¸ºspringæ•´åˆMybatisï¼Œéœ€è¦æ–°åˆ›å»ºä¸€ä¸ªæ¥å£å®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserMapperImpl</span> <span class="keyword">implements</span> <span class="title">UserMapper</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> SqlSessionTemplate sqlsession;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSession</span><span class="params">(SqlSessionTemplate sqlsession)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sqlsession = sqlsession;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        UserMapper mapper = sqlsession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="keyword">return</span> mapper.getUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç»™å®ç°ç±»æ³¨å…¥sqlSessionFactory</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userMapper&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.mapper.UserMapperImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlsession&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlsession&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">       ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;spring-dao.xml&quot;</span>);</span><br><span class="line">       UserMapper userMapper = (UserMapper) context.getBean(<span class="string">&quot;userMapper&quot;</span>);</span><br><span class="line">       <span class="keyword">for</span> (User user : userMapper.getUser())&#123;</span><br><span class="line">           System.out.println(user);</span><br><span class="line">       &#125;</span><br><span class="line">   </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="æ•´åˆæ–¹å¼äºŒï¼š"><a href="#æ•´åˆæ–¹å¼äºŒï¼š" class="headerlink" title="æ•´åˆæ–¹å¼äºŒï¼š"></a>æ•´åˆæ–¹å¼äºŒï¼š</h3><p>ä½¿ç”¨SqlSessionDaoSupport</p><ol><li><p>åœ¨æ¥å£å®ç°ç±»ä¸Šç»§æ‰¿SqlSessionDaoSupport</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserMapperImpl02</span> <span class="keyword">extends</span> <span class="title">SqlSessionDaoSupport</span> <span class="keyword">implements</span> <span class="title">UserMapper</span></span>&#123;</span><br><span class="line">    <span class="comment">//ä½¿ç”¨getSqlSession()å°±ä¼šè·å¾—ä¸€ä¸ªsqlsession</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getSqlSession().getMapper(UserMapper.class).getUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®bean</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userMapper02&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mhy.mapper.UserMapperImpl02&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h2><ul><li>å£°æ˜å¼äº‹åŠ¡ã€‚å°†äº‹åŠ¡ç®¡ç†çš„ä»£ç ä»ä¸šåŠ¡æ–¹æ³•ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œæ¯”ç¼–ç¨‹å¼äº‹åŠ¡å¥½ç”¨</li><li>ç¼–ç¨‹å¼äº‹åŠ¡ã€‚éœ€è¦æ”¹å˜æºä»£ç ï¼Œä¸ç”¨å®ƒ</li></ul><p>åœ¨springé…ç½®æ–‡ä»¶çš„å¤´æ–‡ä»¶ä¸­å¯¼å…¥çº¦æŸ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;</span><br><span class="line"></span><br><span class="line">http://www.springframework.org/schema/tx</span><br><span class="line">http://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt;</span><br></pre></td></tr></table></figure><p>é…ç½®bean</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é…ç½®äº‹åŠ¡é€šçŸ¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®äº‹åŠ¡é€šçŸ¥--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--é…ç½®å“ªäº›æ–¹æ³•ä½¿ç”¨ä»€ä¹ˆæ ·çš„äº‹åŠ¡,é…ç½®äº‹åŠ¡çš„ä¼ æ’­ç‰¹æ€§,é»˜è®¤å°±æ˜¯propagation=&quot;REQUIRED&quot;,å¯ä»¥ä¸å†™--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;add&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;delete&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;update&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;search*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;get&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- ç»™æ‰€æœ‰çš„æ–¹æ³•é…ç½®äº‹åŠ¡ --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æœ€åé…ç½®aop</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®aopç»‡å…¥äº‹åŠ¡--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;txPointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.mhy.dao.*.*(..))&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;txPointcut&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://www.bilibili.com/video/BV1WE411d7Dv?p=12&amp;t=868">ã€ç‹‚ç¥è¯´Javaã€‘Spring5æœ€æ–°å®Œæ•´æ•™ç¨‹IDEAç‰ˆé€šä¿—æ˜“æ‡‚</a></p><p><a href="https://blog.csdn.net/m0_37989980/article/details/104552379">Springâ€”â€”IoCæ ¸å¿ƒ(åŸºäºXML)ã€DIæ ¸å¿ƒ(åŸºäºXML)ã€FactoryBeanã€Beançš„ç”Ÿå‘½å‘¨æœŸ</a></p>]]></content>
      
      
      <categories>
          
          <category> Springå¤§å®¶æ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SSM </tag>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL Serverä¸‹è½½å®‰è£…</title>
      <link href="/2021/03/05/SQL%20Server%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85/"/>
      <url>/2021/03/05/SQL%20Server%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h3 id="SQL-Server-2019ç‰ˆæœ¬ä¸‹è½½åŠå®‰è£…"><a href="#SQL-Server-2019ç‰ˆæœ¬ä¸‹è½½åŠå®‰è£…" class="headerlink" title="SQL Server 2019ç‰ˆæœ¬ä¸‹è½½åŠå®‰è£…"></a>SQL Server 2019ç‰ˆæœ¬ä¸‹è½½åŠå®‰è£…</h3><ol><li><p>ä»å®˜ç½‘ä¸‹è½½â¡<a href="https://www.microsoft.com/zh-CN/sql-server/sql-server-2019">å®˜æ–¹ç½‘å€</a></p><span id="more"></span></li></ol><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/1.png"></p><ol start="2"><li>ç‚¹å‡»ä¸‹è½½åï¼Œè·³è½¬åˆ°é€‰æ‹©ä¸‹è½½ç‰ˆæœ¬ç•Œé¢ï¼Œç„¶åæ‰¾åˆ°å¦‚ä¸‹ç®­å¤´æ‰€ç¤ºå…è´¹ç‰ˆæœ¬è¿›è¡Œä¸‹è½½.(æ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬è¿›è¡Œä¸‹è½½å®‰è£…ï¼Œè¿™é‡Œåªæ¼”ç¤ºå…è´¹ç‰ˆæœ¬çš„ä¸‹è½½å’Œå®‰è£…)</li></ol><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/2.png"></p><ol start="3"><li><p>ç­‰å¾…ä¸‹è½½å®Œæˆåæ‰¾åˆ°å®‰è£…åŒ…åŒå‡»è¿›è¡Œå®‰è£…</p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/3.png"></p></li></ol><p>4.æ ¹æ®è‡ªå·±çš„éœ€è¦é€‰æ‹©å¯¹åº”çš„é€‰é¡¹(è¿™é‡Œåªè¿›è¡Œæˆ‘ä¸ªäººçš„é€‰æ‹©å®‰è£…)</p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/4.png"></p><ol start="5"><li>é€‰æ‹©è¯­è¨€ï¼Œç„¶åç‚¹å‡»å³ä¸‹è§’çš„æ¥å—æŒ‰é’®</li></ol><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/5.png"></p><ol start="6"><li>é€‰æ‹©å®‰è£…çš„ä½ç½®,ç„¶åç‚¹å‡»å®‰è£…</li></ol><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/6.png"></p><ol start="7"><li>ç­‰å¾…ä¸‹è½½å®‰è£…<img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/7.png"></li></ol><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/8.png"></p><ol start="8"><li>å®‰è£…æˆåŠŸ,ç‚¹å‡»å®‰è£…SSMS(æ˜¯ä¸€ä¸ªç®¡ç†å·¥å…·)</li></ol><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/9.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/10.png"></p><ol start="9"><li><p>ä¸‹è½½å®Œæˆåæ‰¾åˆ°å®‰è£…åŒ…ï¼ŒåŒå‡»è¿›è¡Œå®‰è£…<img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/11.png"></p></li><li><p>é€‰æ‹©å®‰è£…çš„ç›®å½•,ç‚¹å‡»å®‰è£…</p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/12.png"></p></li></ol><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/13.png"></p><ol start="11"><li><p>å®‰è£…æˆåŠŸ</p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/14.png"></p></li></ol><h3 id="é…ç½®SQL-Server"><a href="#é…ç½®SQL-Server" class="headerlink" title="é…ç½®SQL Server"></a>é…ç½®SQL Server</h3><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/%E7%AC%AC%E4%B8%80%E6%AD%A5.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/%E7%AC%AC%E4%BA%8C%E6%AD%A5.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/%E7%AC%AC%E4%B8%89%E6%AD%A5.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/%E7%AC%AC%E5%9B%9B%E6%AD%A5.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/%E7%AC%AC%E4%BA%94%E6%AD%A5.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/%E7%AC%AC%E5%85%AD%E6%AD%A5.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/%E7%AC%AC%E4%B8%83%E6%AD%A5.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/%E7%AC%AC%E5%85%AB%E6%AD%A5.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/%E7%AC%AC%E4%B9%9D%E6%AD%A5.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/%E7%AC%AC%E5%8D%81%E6%AD%A5.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/%E7%AC%AC%E5%8D%81%E4%B8%80%E6%AD%A5.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/%E7%AC%AC%E5%8D%81%E4%BA%8C%E6%AD%A5.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/%E7%AC%AC%E5%8D%81%E4%B8%89%E6%AD%A5.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/%E7%AC%AC%E5%8D%81%E5%9B%9B%E6%AD%A5.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/%E7%AC%AC%E5%8D%81%E4%BA%94%E6%AD%A5.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/%E7%AC%AC%E5%8D%81%E5%85%AD%E6%AD%A5.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/%E7%AC%AC%E5%8D%81%E5%99%A8%E6%AD%A5.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/%E7%AC%AC%E5%8D%81%E5%85%AB%E6%AD%A5.png"></p><h3 id="ä½¿ç”¨eclipseè¿æ¥æµ‹è¯•"><a href="#ä½¿ç”¨eclipseè¿æ¥æµ‹è¯•" class="headerlink" title="ä½¿ç”¨eclipseè¿æ¥æµ‹è¯•"></a>ä½¿ç”¨eclipseè¿æ¥æµ‹è¯•</h3><blockquote><p><em><strong>ä»¥ä¸‹æ¼”ç¤ºåªé’ˆå¯¹æœ¬ç¯‡æ–‡ç« å†…çš„SQL Serverç‰ˆæœ¬ï¼Œå¦‚æœä½ çš„SQL Serveræ˜¯æŒ‰ç…§æœ¬ç¯‡æ–‡ç« å®‰è£…å’Œé…ç½®ï¼Œå¯ä»¥å‚ç…§ä»¥ä¸‹å†…å®¹ï¼Œå¦åˆ™ä»¥ä¸‹é©±åŠ¨ç‰ˆæœ¬å¯èƒ½ä¸é€‚åˆä½ çš„SQL Serverã€‚</strong></em></p></blockquote><p>æŸ¥çœ‹ä½ çš„JAVA JDKç‰ˆæœ¬æ˜¯å¦å’Œæˆ‘ä¸€è‡´</p><p><strong>å¦‚æœæ˜¯æŒ‰ç…§æœ¬ç¯‡æ–‡ç« è¿›è¡Œçš„å®‰è£…æ“ä½œï¼Œå¯ä»¥è·³è¿‡ä¸ç”¨æŸ¥çœ‹</strong></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/M1.png"></p><p>ç‚¹å‡»ä¸‹é¢é“¾æ¥ä¸‹è½½é©±åŠ¨</p><p><a href="https://docs.microsoft.com/zh-cn/sql/connect/jdbc/release-notes-for-the-jdbc-driver?view=sql-server-2017#previous-releases">ç‚¹å‡»ä¸‹è½½</a></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/M2.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/M3.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/M4.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/M5.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/M6.png"></p><p><img src="/imgs/SQLServer%E5%AE%89%E8%A3%85%E5%9B%BE%E7%89%87/M7.png"></p><h3 id="å¦‚æœå‘ç°æ–‡ç« å†…å®¹æœ‰é”™è¯¯è¯·é€šè¿‡é¡µé¢å³ä¸Šè§’â¡å…³äºæˆ‘â¬…è”ç³»æˆ‘"><a href="#å¦‚æœå‘ç°æ–‡ç« å†…å®¹æœ‰é”™è¯¯è¯·é€šè¿‡é¡µé¢å³ä¸Šè§’â¡å…³äºæˆ‘â¬…è”ç³»æˆ‘" class="headerlink" title="å¦‚æœå‘ç°æ–‡ç« å†…å®¹æœ‰é”™è¯¯è¯·é€šè¿‡é¡µé¢å³ä¸Šè§’â¡å…³äºæˆ‘â¬…è”ç³»æˆ‘"></a>å¦‚æœå‘ç°æ–‡ç« å†…å®¹æœ‰é”™è¯¯è¯·é€šè¿‡é¡µé¢å³ä¸Šè§’â¡å…³äºæˆ‘â¬…è”ç³»æˆ‘</h3>]]></content>
      
      
      <categories>
          
          <category> SQL Server </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL Server </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºhexoåœ¨windowsæ­å»ºåšå®¢æ­¥éª¤</title>
      <link href="/2021/02/19/%E5%9F%BA%E4%BA%8Ehexo%E5%9C%A8windows%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%AD%A5%E9%AA%A4/"/>
      <url>/2021/02/19/%E5%9F%BA%E4%BA%8Ehexo%E5%9C%A8windows%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%AD%A5%E9%AA%A4/</url>
      
        <content type="html"><![CDATA[<p><em><strong>æ­¤æ–‡ç« å†…å®¹ä¸å®é™…æ“ä½œæœ‰å‡ºå…¥ï¼Œå¾…æ›´æ–°ååœ¨åšå‚è€ƒ!!!</strong></em></p><h3 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h3><p>ä½¿ç”¨hexoæ­å»ºåšå®¢å‰ææ¡ä»¶:</p><p>å®‰è£…å¹¶é…ç½®å¥½Git(ç”¨æˆ·åå’Œé‚®ç®±)</p><span id="more"></span><h3 id="å®‰è£…nodejs"><a href="#å®‰è£…nodejs" class="headerlink" title="å®‰è£…nodejs"></a>å®‰è£…nodejs</h3><ol><li><p>ä¸‹è½½å¹¶å®‰è£…nodejs</p><blockquote><p><a href="https://nodejs.org/en/">https://nodejs.org/en/</a></p></blockquote></li></ol><h3 id="å®‰è£…cnpm"><a href="#å®‰è£…cnpm" class="headerlink" title="å®‰è£…cnpm"></a>å®‰è£…cnpm</h3><ol><li><p>winæ‰“å¼€å‘½ä»¤æ“ä½œç¬¦åˆ†åˆ«è¾“å…¥ nodejs -v  npm -v  æŸ¥çœ‹å¯¹åº”çš„ç‰ˆæœ¬ï¼Œå¦‚æœæ­£å¸¸æ˜¾ç¤ºç‰ˆæœ¬å·è¯æ˜nodejså®‰è£…æˆåŠŸ</p></li><li><p>å®‰è£…cnpm(ç”±äºè®¿é—®å¤–ç½‘ç½‘é€Ÿæ…¢ï¼Œæ­¤å¤„ä½¿ç”¨æ·˜å®é•œåƒç‰ˆ)</p><blockquote><p>npm  install -g cnpm â€“registry=<a href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a></p><p>å®‰è£…åä½¿ç”¨cnpm -v æŸ¥çœ‹ç‰ˆæœ¬æ˜¯å¦å®‰è£…æˆåŠŸ</p></blockquote></li></ol><h3 id="å®‰è£…hexo"><a href="#å®‰è£…hexo" class="headerlink" title="å®‰è£…hexo"></a>å®‰è£…hexo</h3><blockquote><p>cnpm install -g hexo-cli</p><p>å®‰è£…åä½¿ç”¨ hexo -v æŸ¥çœ‹ç‰ˆæœ¬æ˜¯å¦å®‰è£…æˆåŠŸ</p></blockquote><h3 id="åˆ›å»ºåšå®¢ç›®å½•å¹¶åˆå§‹åŒ–"><a href="#åˆ›å»ºåšå®¢ç›®å½•å¹¶åˆå§‹åŒ–" class="headerlink" title="åˆ›å»ºåšå®¢ç›®å½•å¹¶åˆå§‹åŒ–"></a>åˆ›å»ºåšå®¢ç›®å½•å¹¶åˆå§‹åŒ–</h3><ol><li>mkdir  blog(å¯ä»»æ„è®¾ç½®å­˜æ”¾åšå®¢æ–‡ä»¶å)</li></ol><blockquote><p>å¦‚æœæœ‰é”™è¯¯å¯ä»¥åˆ é™¤åˆ›å»ºçš„æ­¤ç›®å½•ç›´æ¥é‡å¤´å†æ¥</p><p>æ­¤è·¯å¾„åœ¨ç”¨æˆ·ç›®å½•ä¸‹</p></blockquote><ol start="2"><li><p>è¿›å…¥åšå®¢ç›®å½•å¹¶åˆå§‹åŒ–åšå®¢</p><blockquote><p>cd blog     è¿›å…¥åšå®¢ç›®å½•</p><p>hexo init   åˆå§‹åŒ–åšå®¢(æ­¤å¤„ç½‘ç»œæ…¢å»ºè®®ä½¿ç”¨æ‰‹æœºçƒ­ç‚¹)</p></blockquote></li><li><p>è¿›å…¥blogç›®å½•æŸ¥çœ‹æ˜¯å¦ç”ŸæˆåŸºç¡€æ¡†æ¶å†…å®¹</p><blockquote><p>æŸ¥çœ‹æ˜¯å¦æœ‰source ã€themesã€_config.ymlç­‰æ–‡ä»¶</p></blockquote></li></ol><h3 id="å¯åŠ¨å¹¶è‡ªå®šä¹‰åšå®¢"><a href="#å¯åŠ¨å¹¶è‡ªå®šä¹‰åšå®¢" class="headerlink" title="å¯åŠ¨å¹¶è‡ªå®šä¹‰åšå®¢"></a>å¯åŠ¨å¹¶è‡ªå®šä¹‰åšå®¢</h3><ol><li><p>hexo s å¯åŠ¨åšå®¢</p><blockquote><p>å¯åŠ¨æˆåŠŸåé»˜è®¤åœ°å€æ˜¯ä½¿ç”¨localhost:4000è¿›è¡Œè®¿é—®</p></blockquote></li><li><p>hexo n â€œæ–‡ä»¶åâ€</p><blockquote><p>åˆ›å»ºæ–°çš„åšå®¢æ–‡ç« </p><p>åˆ›å»ºçš„æ–‡ç« è·¯å¾„åœ¨ source/_posts </p></blockquote></li><li><p>ç¼–å†™æ–‡ç« å†…å®¹</p><blockquote><p>å¯ä½¿ç”¨typoraç¼–å†™ï¼Œæ ¼å¼ä¸ºmarkdown</p></blockquote></li><li><p>hexo g</p><blockquote><p>ç”Ÿæˆåšå®¢å†…å®¹</p><p>æ³¨æ„è¦é€€å‡ºåˆ° blogè·¯å¾„ä¸‹</p></blockquote></li><li><p>hexo s</p><blockquote><p>å†æ¬¡å¯åŠ¨åšå®¢ï¼Œä½¿ç”¨localhost:4000è®¿é—®æŸ¥çœ‹</p><p>ä½¿ç”¨æŠ€å·§ï¼š</p><p>åˆ›å»ºæ–°çš„åšå®¢åä½¿ç”¨localhost:4000é¢„è§ˆï¼Œç„¶ååœ¨æ¨é€åˆ°è¿œç«¯</p></blockquote></li></ol><h3 id="å°†åšå®¢éƒ¨ç½²åˆ°è¿œç«¯-GitHub"><a href="#å°†åšå®¢éƒ¨ç½²åˆ°è¿œç«¯-GitHub" class="headerlink" title="å°†åšå®¢éƒ¨ç½²åˆ°è¿œç«¯(GitHub)"></a>å°†åšå®¢éƒ¨ç½²åˆ°è¿œç«¯(GitHub)</h3><ol><li><p>åˆ›å»ºæ–°çš„ä»“åº“</p><blockquote><p>ä»“åº“åå¿…é¡»å’ŒGitHubç”¨æˆ·åç›¸åŒ</p><p>ä¾‹å¦‚ï¼šsixsixsix.github.io</p><p>æ­¤åœ°å€å°†æ˜¯ä»¥ååœ¨æµè§ˆå™¨è®¿é—®çš„åœ°å€</p></blockquote></li><li><p>å®‰è£…Gitéƒ¨ç½²æ’ä»¶</p><blockquote><p>å‘½ä»¤æç¤ºç¬¦è¿›å…¥blogè·¯å¾„</p><p>cnpm install â€“save hexo-deployer-git</p></blockquote></li><li><p>è®¾ç½®_config.yml</p><blockquote><p>å¯ä»¥ç”¨è®°äº‹æœ¬æ‰“å¼€_config.yml</p><p>åœ¨ #deploymentä¸‹ è®¾ç½® </p><p>type: â€œgitâ€</p><p>repo: (githubä¸­æ–°å»ºä»“åº“çš„åœ°å€)</p><p>branch: master</p><p>!!!æ³¨æ„å†’å·åä¸€å®šè¦åŠ ç©ºæ ¼</p></blockquote></li><li><p>hexo d</p><blockquote><p>å°†åšå®¢éƒ¨ç½²åˆ°è¿œç«¯</p><p>æ­¤å¤„å°†è¾“å…¥ä¸¤ä¸ªå‘½ä»¤ï¼š</p><ul><li><p>ç¬¬ä¸€æ¬¡è¾“å…¥è‡ªå·±çš„GitHubè´¦æˆ·å</p></li><li><p>ç¬¬äºŒæ¬¡è¾“å…¥GitHubå¯†ç </p><p>å¦‚æœå¼¹å‡ºæœ‰GitHubçª—å£ï¼Œè¾“å…¥GitHubå¯†ç å³å¯</p></li></ul></blockquote></li><li><p>æ¨é€æˆåŠŸ</p><blockquote><p>æ¨é€æˆåŠŸåè®¿é—®GitHubæ–°å»ºä»“åº“ï¼Œä¼šå‘ç°å¤šäº†åšå®¢ç”Ÿæˆçš„å†…å®¹</p><p>ä½¿ç”¨ä»“åº“åè¿›è¡Œæµ‹è¯•è®¿é—®</p></blockquote></li></ol><h3 id="éƒ¨ç½²æˆåŠŸ"><a href="#éƒ¨ç½²æˆåŠŸ" class="headerlink" title="éƒ¨ç½²æˆåŠŸ"></a>éƒ¨ç½²æˆåŠŸ</h3><p>éƒ¨ç½²æˆåŠŸåä½¿ç”¨æ–°å»ºçš„GitHubä»“åº“åè¿›è¡Œè®¿é—®</p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><blockquote><p><a href="http://www.codesheep.cn/">www.codesheep.cn</a></p></blockquote><h3 id="å¦‚æœå‘ç°æ–‡ç« å†…å®¹æœ‰é”™è¯¯è¯·é€šè¿‡é¡µé¢å³ä¸Šè§’â¡å…³äºæˆ‘â¬…è”ç³»æˆ‘"><a href="#å¦‚æœå‘ç°æ–‡ç« å†…å®¹æœ‰é”™è¯¯è¯·é€šè¿‡é¡µé¢å³ä¸Šè§’â¡å…³äºæˆ‘â¬…è”ç³»æˆ‘" class="headerlink" title="å¦‚æœå‘ç°æ–‡ç« å†…å®¹æœ‰é”™è¯¯è¯·é€šè¿‡é¡µé¢å³ä¸Šè§’â¡å…³äºæˆ‘â¬…è”ç³»æˆ‘"></a>å¦‚æœå‘ç°æ–‡ç« å†…å®¹æœ‰é”™è¯¯è¯·é€šè¿‡é¡µé¢å³ä¸Šè§’â¡å…³äºæˆ‘â¬…è”ç³»æˆ‘</h3>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
